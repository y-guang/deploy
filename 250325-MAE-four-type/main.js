function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}var n,i;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const s=e(i?n:(i=1,n=(e,{include:t,exclude:n}={})=>{const i=e=>{const i=t=>"string"==typeof t?e===t:t.test(e);return t?t.some(i):!n||!n.some(i)};for(const[s,r]of(e=>{const t=new Set;do{for(const n of Reflect.ownKeys(e))t.add([e,n])}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t})(e.constructor.prototype)){if("constructor"===r||!i(r))continue;const t=Reflect.getOwnPropertyDescriptor(s,r);t&&"function"==typeof t.value&&(e[r]=e[r].bind(e))}return e}));var r,a={exports:{}};function o(){return r||(r=1,function(e,t){function n(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var i=.02519603282416938*(e+=t.charCodeAt(n));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var s=new n(e),r=t&&t.state,a=s.next;return a.int32=function(){return 4294967296*s.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,s),a.state=function(){return i(s,{})}),a}t&&t.exports?t.exports=s:this.alea=s}(0,a)),a.exports}var l,u={exports:{}};var c,d={exports:{}};var h,p={exports:{}};var m,f={exports:{}};var g,y={exports:{}};var _={exports:{}};const v=t(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var b,w,x,j,E,P=_.exports;function T(){return b||(b=1,e=_,function(t,n,i){var s,r=256,a="random",o=i.pow(r,6),l=i.pow(2,52),u=2*l,c=255;function d(e,c,d){var y=[],_=f(m((c=1==c?{entropy:!0}:c||{}).entropy?[e,g(n)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(r):(e=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(e)),g(e)}catch(o){var i=t.navigator,a=i&&i.plugins;return[+new Date,t,a,t.screen,g(n)]}}():e,3),y),v=new h(y),b=function(){for(var e=v.g(6),t=o,n=0;e<l;)e=(e+n)*r,t*=r,n=v.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|v.g(4)},b.quick=function(){return v.g(4)/4294967296},b.double=b,f(g(v.S),n),(c.pass||d||function(e,t,n,s){return s&&(s.S&&p(s,v),e.state=function(){return p(v,{})}),n?(i[a]=e,t):e})(b,_,"global"in c?c.global:this==i,c.state)}function h(e){var t,n=e.length,i=this,s=0,a=i.i=i.j=0,o=i.S=[];for(n||(e=[n++]);s<r;)o[s]=s++;for(s=0;s<r;s++)o[s]=o[a=c&a+e[s%n]+(t=o[s])],o[a]=t;(i.g=function(e){for(var t,n=0,s=i.i,a=i.j,o=i.S;e--;)t=o[s=c&s+1],n=n*r+o[c&(o[s]=o[a=c&a+t])+(o[a]=t)];return i.i=s,i.j=a,n})(r)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,i=[],s=typeof e;if(t&&"object"==s)for(n in e)try{i.push(m(e[n],t-1))}catch(r){}return i.length?i:"string"==s?e:e+"\0"}function f(e,t){for(var n,i=e+"",s=0;s<i.length;)t[c&s]=c&(n^=19*t[c&s])+i.charCodeAt(s++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(f(i.random(),n),e.exports){e.exports=d;try{s=v}catch(y){}}else i["seed"+a]=d}("undefined"!=typeof self?self:P,[],Math)),_.exports;var e}function S(){if(x)return w;x=1;var e=o(),t=(l||(l=1,function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var s=new n(e),r=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=s.next,a.quick=a,r&&("object"==typeof r&&i(r,s),a.state=function(){return i(s,{})}),a}t&&t.exports?t.exports=s:this.xor128=s}(0,u)),u.exports),n=(c||(c=1,function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),i==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var s=new n(e),r=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=s.next,a.quick=a,r&&("object"==typeof r&&i(r,s),a.state=function(){return i(s,{})}),a}t&&t.exports?t.exports=s:this.xorwow=s}(0,d)),d.exports),i=(h||(h=1,function(e,t){function n(e){var t=this;t.next=function(){var e,n,i=t.x,s=t.i;return e=i[s],n=(e^=e>>>7)^e<<24,n^=(e=i[s+1&7])^e>>>10,n^=(e=i[s+3&7])^e>>>3,n^=(e=i[s+4&7])^e<<7,e=i[s+7&7],n^=(e^=e<<13)^e<<9,i[s]=n,t.i=s+1&7,n},function(e,t){var n,i=[];if(t===(0|t))i[0]=t;else for(t=""+t,n=0;n<t.length;++n)i[7&n]=i[7&n]<<15^t.charCodeAt(n)+i[n+1&7]<<13;for(;i.length<8;)i.push(0);for(n=0;n<8&&0===i[n];++n);for(8==n?i[7]=-1:i[n],e.x=i,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var s=new n(e),r=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=s.next,a.quick=a,r&&(r.x&&i(r,s),a.state=function(){return i(s,{})}),a}t&&t.exports?t.exports=s:this.xorshift7=s}(0,p)),p.exports),s=(m||(m=1,function(e,t){function n(e){var t=this;t.next=function(){var e,n,i=t.w,s=t.X,r=t.i;return t.w=i=i+1640531527|0,n=s[r+34&127],e=s[r=r+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=s[r]=n^e,t.i=r,n+(i^i>>>16)|0},function(e,t){var n,i,s,r,a,o=[],l=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,l=Math.max(l,t.length)),s=0,r=-32;r<l;++r)t&&(i^=t.charCodeAt((r+32)%t.length)),0===r&&(a=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,r>=0&&(a=a+1640531527|0,s=0==(n=o[127&r]^=i+a)?s+1:0);for(s>=128&&(o[127&(t&&t.length||0)]=-1),s=127,r=512;r>0;--r)i=o[s+34&127],n=o[s=s+1&127],i^=i<<13,n^=n<<17,i^=i>>>15,n^=n>>>12,o[s]=i^n;e.w=a,e.X=o,e.i=s}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var s=new n(e),r=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=s.next,a.quick=a,r&&(r.X&&i(r,s),a.state=function(){return i(s,{})}),a}t&&t.exports?t.exports=s:this.xor4096=s}(0,f)),f.exports),r=(g||(g=1,function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,i=t.d,s=t.a;return e=e<<25^e>>>7^n,n=n-i|0,i=i<<24^i>>>8^s,s=s-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-i|0,t.d=i<<16^n>>>16^s,t.a=s-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var i=0;i<n.length+20;i++)t.b^=0|n.charCodeAt(i),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var s=new n(e),r=t&&t.state,a=function(){return(s.next()>>>0)/4294967296};return a.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=s.next,a.quick=a,r&&("object"==typeof r&&i(r,s),a.state=function(){return i(s,{})}),a}t&&t.exports?t.exports=s:this.tychei=s}(0,y)),y.exports),a=T();return a.alea=e,a.xor128=t,a.xorwow=n,a.xorshift7=i,a.xor4096=s,a.tychei=r,w=a}const I=e(function(){if(E)return j;E=1;var e=S(),t=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function n(n){const i=(null==n?void 0:n.seed)?new e(n.seed):null;function s(){return n&&n.maxLength>1?function(){var e,t=!1;for(;!t;)(e=r()).length<=n.maxLength&&(t=!0);return e}():r()}function r(){return t[a(t.length)]}function a(e){const t=i?i():Math.random();return Math.floor(t*e)}if(void 0===n)return s();"number"==typeof n&&(n={exactly:n}),n.exactly&&(n.min=n.exactly,n.max=n.exactly),"number"!=typeof n.wordsPerString&&(n.wordsPerString=1),"function"!=typeof n.formatter&&(n.formatter=e=>e),"string"!=typeof n.separator&&(n.separator=" ");for(var o=n.min+a(n.max+1-n.min),l=[],u="",c=0,d=0;d<o*n.wordsPerString;d++)c===n.wordsPerString-1?u+=n.formatter(s(),c):u+=n.formatter(s(),c)+n.separator,c++,(d+1)%n.wordsPerString==0&&(l.push(u),u="",c=0);return"string"==typeof n.join&&(l=l.join(n.join)),l}return j=n,n.wordList=t,j}());const k=e(o());class L{constructor(e,t){this.dependencies=e,this.extensionsConfiguration=t,this.extensions=Object.fromEntries(t.map((e=>[L.getExtensionNameByClass(e.type),this.dependencies.instantiateExtension(e.type)])))}static getExtensionNameByClass(e){return e.info.name}getExtensionInstanceByClass(e){return this.extensions[L.getExtensionNameByClass(e)]}async initializeExtensions(){await Promise.all(this.extensionsConfiguration.map((({type:e,params:t={}})=>{this.getExtensionInstanceByClass(e).initialize(t);e.info})))}onStart(e=[]){var t;for(const{type:n,params:i}of e)null==(t=this.getExtensionInstanceByClass(n))||t.on_start(i)}onLoad(e=[]){var t;for(const{type:n,params:i}of e)null==(t=this.getExtensionInstanceByClass(n))||t.on_load(i)}async onFinish(e=[]){const t=await Promise.all(e.map((({type:e,params:t})=>{var n;return Promise.resolve(null==(n=this.getExtensionInstanceByClass(e))?void 0:n.on_finish(t))}))),n=e.length?{extension_type:e.map((({type:e})=>e.info.name)),extension_version:e.map((({type:e})=>e.info.version))}:{};return t.unshift(n),Object.assign({},...t)}}function A(e){return[...new Set(e)]}function O(e){if(!e)return e;let t;if(Array.isArray(e)){t=[];for(const n of e)t.push(O(n));return t}if("object"==typeof e&&null!==e){t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=O(e[n]));return t}return e}function C(e,t){let n={};for(const i in e)e.hasOwnProperty(i)&&("object"==typeof e[i]&&t.hasOwnProperty(i)?n[i]=C(e[i],t[i]):n[i]=e[i]);for(const i in t)t.hasOwnProperty(i)&&(n.hasOwnProperty(i)&&"object"==typeof t[i]?n[i]=C(n[i],t[i]):n[i]=t[i]);return n}var M=Object.freeze({__proto__:null,deepCopy:O,deepMerge:C,unique:A});class N{constructor(e=[]){this.values=e}sum(){let e=0;for(const t of this.values)e+=t;return e}mean(){let e=0,t=0;for(const n of this.values)null!=n&&(e+=n,t++);if(0!==t)return e/t}median(){if(0===this.values.length)return;const e=this.values.slice(0).sort((function(e,t){return e-t})),t=Math.floor(e.length/2);return e.length%2==0?(e[t]+e[t-1])/2:e[t]}min(){return Math.min.apply(null,this.values)}max(){return Math.max.apply(null,this.values)}count(){return this.values.length}variance(){const e=this.mean();let t=0;for(const n of this.values)t+=Math.pow(n-e,2);return t/(this.values.length-1)}sd(){const e=this.variance();return Math.sqrt(e)}frequencies(){const e={};for(const t of this.values)void 0===e[t]?e[t]=1:e[t]++;return e}all(e){for(const t of this.values)if(!e(t))return!1;return!0}subset(e){const t=[];for(const n of this.values)e(n)&&t.push(n);return new N(t)}}class R{constructor(e=[]){this.trials=e}push(e){return this.trials.push(e),this}join(e){return this.trials=this.trials.concat(e.values()),this}top(){return this.trials.length<=1?this:new R([this.trials[this.trials.length-1]])}first(e=1){if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new R:(e>this.trials.length&&(e=this.trials.length),new R(this.trials.slice(0,e)))}last(e=1){if(e<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new R:(e>this.trials.length&&(e=this.trials.length),new R(this.trials.slice(this.trials.length-e,this.trials.length)))}values(){return this.trials}count(){return this.trials.length}readOnly(){return new R(O(this.trials))}addToAll(e){for(const t of this.trials)Object.assign(t,e);return this}addToLast(e){return this.trials.length>0&&Object.assign(this.trials[this.trials.length-1],e),this}filter(e){let t;t=Array.isArray(e)?O(e):O([e]);const n=[];for(const i of this.trials){let e=!1;for(const n of t){let t=!0;for(const e of Object.keys(n))void 0!==i[e]&&i[e]===n[e]||(t=!1);if(t){e=!0;break}}e&&n.push(i)}return new R(n)}filterCustom(e){return new R(this.trials.filter(e))}filterColumns(e){return new R(this.trials.map((t=>Object.fromEntries(e.filter((e=>e in t)).map((e=>[e,t[e]]))))))}select(e){const t=[];for(const n of this.trials)void 0!==n[e]&&t.push(n[e]);return new N(t)}ignore(e){Array.isArray(e)||(e=[e]);const t=O(this.trials);for(const n of t)for(const t of e)delete n[t];return new R(t)}uniqueNames(){const e=[];for(const t of this.trials)for(const n of Object.keys(t))e.includes(n)||e.push(n);return e}csv(){return function(e){const t="object"!=typeof e?JSON.parse(e):e;let n="",i="";const s=[];for(const r of t)for(const e in r){let t=e+"";t='"'+t.replace(/"/g,'""')+'",',s.includes(e)||(s.push(e),n+=t)}n=n.slice(0,-1),i+=n+"\r\n";for(const r of t){n="";for(const e of s){let t=void 0===r[e]?"":r[e];"object"==typeof t&&(t=JSON.stringify(t)),n+='"'+(t+"").replace(/"/g,'""')+'",'}n=n.slice(0,-1),i+=n+"\r\n"}return i}(this.trials)}json(e=!1){return e?JSON.stringify(this.trials,null,"\t"):JSON.stringify(this.trials)}localSave(e,t){let n;if("json"===(e=e.toLowerCase()))n=this.json();else{if("csv"!==e)throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');n=this.csv()}!function(e,t){const n=new Blob([e],{type:"text/plain"});let i="";i=void 0!==window.webkitURL?window.webkitURL.createObjectURL(n):window.URL.createObjectURL(n);const s=document.createElement("a");s.id="jspsych-download-as-text-link",s.style.display="none",s.download=t,s.href=i,s.click()}(n,t)}}class q{constructor(e){this.dependencies=e,this.dataProperties={},this.interactionListeners={blur:()=>{this.addInteractionRecord("blur")},focus:()=>{this.addInteractionRecord("focus")},fullscreenchange:()=>{this.addInteractionRecord(document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||document.fullscreenElement?"fullscreenenter":"fullscreenexit")}},this.reset()}reset(){this.results=new R,this.resultToTrialMap=new WeakMap,this.interactionRecords=new R}get(){return this.results}getInteractionData(){return this.interactionRecords}write(e){const t=e.getResult();Object.assign(t,this.dataProperties),this.results.push(t),this.resultToTrialMap.set(t,e)}addProperties(e){this.results.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}addDataToLastTrial(e){this.results.addToLast(e)}getLastTrialData(){return this.results.top()}getLastTimelineData(){const e=this.getLastTrialData().values()[0];return new R(e?this.resultToTrialMap.get(e).parent.getResults():[])}displayData(e="json"){"json"!==(e=e.toLowerCase())&&"csv"!==e&&(e="json");const t=document.createElement("pre");t.id="jspsych-data-display",t.textContent="json"===e?this.results.json(!0):this.results.csv(),this.dependencies.getDisplayElement().replaceChildren(t)}urlVariables(){return void 0===this.query_string&&(this.query_string=function(){const e=window.location.search.substr(1).split("&"),t={};for(let n=0;n<e.length;++n){const i=e[n].split("=",2);1==i.length?t[i[0]]="":t[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return t}()),this.query_string}getURLVariable(e){return this.urlVariables()[e]}addInteractionRecord(e){const t={event:e,...this.dependencies.getProgress()};this.interactionRecords.push(t),this.dependencies.onInteractionRecordAdded(t)}createInteractionListeners(){window.addEventListener("blur",this.interactionListeners.blur),window.addEventListener("focus",this.interactionListeners.focus),document.addEventListener("fullscreenchange",this.interactionListeners.fullscreenchange),document.addEventListener("mozfullscreenchange",this.interactionListeners.fullscreenchange),document.addEventListener("webkitfullscreenchange",this.interactionListeners.fullscreenchange)}removeInteractionListeners(){window.removeEventListener("blur",this.interactionListeners.blur),window.removeEventListener("focus",this.interactionListeners.focus),document.removeEventListener("fullscreenchange",this.interactionListeners.fullscreenchange),document.removeEventListener("mozfullscreenchange",this.interactionListeners.fullscreenchange),document.removeEventListener("webkitfullscreenchange",this.interactionListeners.fullscreenchange)}}class ${constructor(e,t=!1,n=0){this.getRootElement=e,this.areResponsesCaseSensitive=t,this.minimumValidRt=n,this.listeners=new Set,this.heldKeys=new Set,this.areRootListenersRegistered=!1,s(this),this.registerRootListeners()}registerRootListeners(){if(!this.areRootListenersRegistered){const e=this.getRootElement();e&&(e.addEventListener("keydown",this.rootKeydownListener),e.addEventListener("keyup",this.rootKeyupListener),this.areRootListenersRegistered=!0)}}rootKeydownListener(e){for(const t of[...this.listeners])t(e);this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key))}toLowerCaseIfInsensitive(e){return this.areResponsesCaseSensitive?e:e.toLowerCase()}rootKeyupListener(e){this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key))}isResponseValid(e,t,n){return!(!t&&this.heldKeys.has(n))&&("ALL_KEYS"===e||"NO_KEYS"!==e&&e.includes(n))}getKeyboardResponse({callback_function:e,valid_responses:t="ALL_KEYS",rt_method:n="performance",persist:i,audio_context:s,audio_context_start_time:r,allow_held_key:a=!1,minimum_valid_rt:o=this.minimumValidRt}){"performance"!==n&&"audio"!==n&&(n="performance");const l="performance"===n?performance.now():1e3*r;this.registerRootListeners(),this.areResponsesCaseSensitive||"string"==typeof t||(t=t.map((e=>e.toLowerCase())));const u=r=>{const c=Math.round(("performance"==n?performance.now():1e3*s.currentTime)-l);if(c<o)return;const d=this.toLowerCaseIfInsensitive(r.key);this.isResponseValid(t,a,d)&&(r.preventDefault(),i||this.cancelKeyboardResponse(u),e({key:r.key,rt:c}))};return this.listeners.add(u),u}cancelKeyboardResponse(e){this.listeners.delete(e)}cancelAllKeyboardResponses(){this.listeners.clear()}compareKeys(e,t){if(!("string"!=typeof e&&null!==e||"string"!=typeof t&&null!==t))return"string"==typeof e&&"string"==typeof t?this.areResponsesCaseSensitive?e===t:e.toLowerCase()===t.toLowerCase():null===e&&null===t}}var D=(e=>(e[e.BOOL=0]="BOOL",e[e.STRING=1]="STRING",e[e.INT=2]="INT",e[e.FLOAT=3]="FLOAT",e[e.FUNCTION=4]="FUNCTION",e[e.KEY=5]="KEY",e[e.KEYS=6]="KEYS",e[e.SELECT=7]="SELECT",e[e.HTML_STRING=8]="HTML_STRING",e[e.IMAGE=9]="IMAGE",e[e.AUDIO=10]="AUDIO",e[e.VIDEO=11]="VIDEO",e[e.OBJECT=12]="OBJECT",e[e.COMPLEX=13]="COMPLEX",e[e.TIMELINE=14]="TIMELINE",e))(D||{});class z{constructor(e,t={useWebAudio:!1}){this.src=e,this.useWebAudio=t.useWebAudio,this.audioContext=t.audioContext||null}async load(){this.useWebAudio?this.webAudioBuffer=await this.preloadWebAudio(this.src):this.audio=await this.preloadHTMLAudio(this.src)}play(){this.audio instanceof HTMLAudioElement?this.audio.play():(this.audio||(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.start())}stop(){this.audio instanceof HTMLAudioElement?(this.audio.pause(),this.audio.currentTime=0):(this.audio.stop(),this.audio=this.getAudioSourceNode(this.webAudioBuffer))}addEventListener(e,t){!this.audio&&this.webAudioBuffer&&(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.addEventListener(e,t)}removeEventListener(e,t){!this.audio&&this.webAudioBuffer&&(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.removeEventListener(e,t)}getAudioSourceNode(e){const t=this.audioContext.createBufferSource();return t.buffer=e,t.connect(this.audioContext.destination),t}async preloadWebAudio(e){const t=await fetch(e),n=await t.arrayBuffer(),i=await this.audioContext.decodeAudioData(n),s=this.audioContext.createBufferSource();return s.buffer=i,s.connect(this.audioContext.destination),i}async preloadHTMLAudio(e){return new Promise(((t,n)=>{const i=new Audio(e);i.addEventListener("canplaythrough",(()=>{t(i)})),i.addEventListener("error",(e=>{n(e)})),i.addEventListener("abort",(e=>{n(e)}))}))}}const B=[D.AUDIO,D.IMAGE,D.VIDEO];class V{constructor(e){this.useWebaudio=e,this.video_buffers={},this.context=null,this.audio_buffers=[],this.preload_requests=[],this.img_cache={},this.preloadMap=new Map,this.microphone_recorder=null,this.camera_stream=null,this.camera_recorder=null,this.useWebaudio&&"undefined"!=typeof window&&void 0!==window.AudioContext&&(this.context=new AudioContext)}getVideoBuffer(e){return e.startsWith("blob:")&&(this.video_buffers[e]=e),this.video_buffers[e]}audioContext(){return this.context&&"running"!==this.context.state&&this.context.resume(),this.context}async getAudioPlayer(e){return this.audio_buffers[e]instanceof z||(this.audio_buffers[e]=new z(e,{useWebAudio:this.useWebaudio,audioContext:this.context}),await this.audio_buffers[e].load()),this.audio_buffers[e]}preloadAudio(e,t=()=>{},n=e=>{},i=e=>{}){e=A(e.flat());let s=0;if(0!=e.length)for(const r of e)this.audio_buffers[r]instanceof z?(s++,n(r),s==e.length&&t()):(this.audio_buffers[r]=new z(r,{useWebAudio:this.useWebaudio,audioContext:this.context}),this.audio_buffers[r].load().then((()=>{s++,n(r),s==e.length&&t()})).catch((e=>{i(e)})));else t()}preloadImages(e,t=()=>{},n=e=>{},i=e=>{}){e=A(e.flat());var s=0;if(0!==e.length)for(let r=0;r<e.length;r++){const a=new Image,o=e[r];a.onload=()=>{s++,n(o),s===e.length&&t()},a.onerror=e=>{i({source:o,error:e})},a.src=o,this.img_cache[o]=a,this.preload_requests.push(a)}else t()}preloadVideo(e,t=()=>{},n=e=>{},i=e=>{}){e=A(e.flat());let s=0;if(0!==e.length)for(const r of e){const a=this.video_buffers,o=new XMLHttpRequest;o.open("GET",r,!0),o.responseType="blob",o.onload=()=>{if(200===o.status||0===o.status){const i=o.response;a[r]=URL.createObjectURL(i),s++,n(r),s===e.length&&t()}},o.onerror=e=>{let t=e;404==o.status&&(t="404"),i({source:r,error:t})},o.onloadend=e=>{404==o.status&&i({source:r,error:"404"})},o.send(),this.preload_requests.push(o)}else t()}getAutoPreloadList(e){const t=Object.fromEntries(B.map((e=>[e,new Set]))),n=(e,i)=>{var s;if(void 0!==e.timeline)for(const t of e.timeline)n(t,e.type??i);else if(null==(s=e.type??i)?void 0:s.info){const{name:n,parameters:s}=(e.type??i).info;this.preloadMap.has(n)||this.preloadMap.set(n,Object.fromEntries(Object.entries(s).filter((([e,{type:t,preload:n}])=>B.includes(t)&&(n??!0))).map((([e,{type:t}])=>[e,t]))));for(const[i,r]of Object.entries(this.preloadMap.get(n))){const n=e[i],s=t[r];if("string"==typeof n)s.add(n);else if(Array.isArray(n))for(const e of n.flat())"string"==typeof e&&s.add(e)}}};return n({timeline:e}),{images:[...t[D.IMAGE]],audio:[...t[D.AUDIO]],video:[...t[D.VIDEO]]}}cancelPreloads(){for(const e of this.preload_requests)e.onload=()=>{},e.onerror=()=>{},e.oncanplaythrough=()=>{},e.onabort=()=>{};this.preload_requests=[]}initializeMicrophoneRecorder(e){const t=new MediaRecorder(e);this.microphone_recorder=t}getMicrophoneRecorder(){return this.microphone_recorder}initializeCameraRecorder(e,t){this.camera_stream=e;const n=new MediaRecorder(e,t);this.camera_recorder=n}getCameraStream(){return this.camera_stream}getCameraRecorder(){return this.camera_recorder}}class G{constructor(e,t){this.getDisplayContainerElement=e,this.setJsPsychTimeout=t}dispatchEvent(e){this.getDisplayContainerElement().dispatchEvent(e)}keyDown(e){this.dispatchEvent(new KeyboardEvent("keydown",{key:e}))}keyUp(e){this.dispatchEvent(new KeyboardEvent("keyup",{key:e}))}pressKey(e,t=0){t>0?this.setJsPsychTimeout((()=>{this.keyDown(e),this.keyUp(e)}),t):(this.keyDown(e),this.keyUp(e))}clickTarget(e,t=0){t>0?this.setJsPsychTimeout((()=>{e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}),t):(e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}fillTextInput(e,t,n=0){n>0?this.setJsPsychTimeout((()=>{e.value=t}),n):e.value=t}getValidKey(e){const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"," "];let n;if("NO_KEYS"==e)n=null;else if("ALL_KEYS"==e)n=t[Math.floor(Math.random()*t.length)];else{const t=e.flat();n=t[Math.floor(Math.random()*t.length)]}return n}mergeSimulationData(e,t){return{...e,...null==t?void 0:t.data}}ensureSimulationDataConsistency(e,t){if(t.rt&&(t.rt=Math.round(t.rt)),e.trial_duration&&t.rt&&t.rt>e.trial_duration&&(t.rt=null,t.response&&(t.response=null),t.correct&&(t.correct=!1)),e.choices&&"NO_KEYS"==e.choices&&(t.rt&&(t.rt=null),t.response&&(t.response=null)),e.allow_response_before_complete&&e.sequence_reps&&e.frame_time){const n=e.sequence_reps*e.frame_time*e.stimuli.length;t.rt<n&&(t.rt=null,t.response=null)}}}class F{constructor(){this.timeout_handlers=[]}setTimeout(e,t){const n=window.setTimeout(e,t);return this.timeout_handlers.push(n),n}clearAllTimeouts(){for(const e of this.timeout_handlers)clearTimeout(e);this.timeout_handlers=[]}}function K(e,t,n=!1){const i=Array.isArray(e),s=Array.isArray(t);if(i)if(s){if(e.length!=t.length)if(t.length<e.length){let n=[];for(let i=0;i<e.length;i++)n.push(t);t=n}else t=t.slice(0,e.length)}else{let n=[];for(let i=0;i<e.length;i++)n.push(t);t=n}else s?t=[t[0]]:(e=[e],t=[t]);let r=[];for(let o=0;o<e.length;o++)for(let n=0;n<t[o];n++)null==e[o]||"object"!=typeof e[o]?r.push(e[o]):r.push(Object.assign({},e[o]));let a=J(r);return n&&(a=function(e){const t={};for(const n of e)for(const e of Object.keys(n))void 0===t[e]&&(t[e]=[]),t[e].push(n[e]);return t}(a)),a}function J(e){Array.isArray(e);const t=e.slice(0);let n,i,s=t.length;for(;s;)i=Math.floor(Math.random()*s--),n=t[s],t[s]=t[i],t[i]=n;return t}function U(e,t=!1){const n=e.length;if(1==n)return J(e[0]);let i=[];for(let o=0;o<n;o++)i.push(o);t&&(i=J(i));const s=[];let r=null;for(let o=0;o<n;o++)r=null===r?e[o].length:Math.min(r,e[o].length),s.push(J(e[o]));const a=[];for(let o=0;o<r;o++)for(let e=0;e<i.length;e++)a.push(s[i[e]][o]);return a}function H(e,t){return Array.isArray(e),e.length,J(e).slice(0,t)}function Y(e,t,n){Array.isArray(e);const i=[];if(void 0!==n){n.length,e.length;let t=0;for(const e of n)t+=e;for(const e of n)i.push(e/t)}else for(let a=0;a<e.length;a++)i.push(1/e.length);const s=[i[0]];for(let a=1;a<i.length;a++)s.push(i[a]+s[a-1]);const r=[];for(let a=0;a<t;a++){const t=Math.random();let n=0;for(;t>s[n];)n++;r.push(e[n])}return r}function W(e,t){return function(){var e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()*t+e}function X(e){return-Math.log(Math.random())/e}var Q=Object.freeze({__proto__:null,factorial:function(e,t=1,n=!1){let i=[{}];for(const[s,r]of Object.entries(e)){const e=[];for(const t of r)for(const n of i)e.push({...n,[s]:t});i=e}return K(i,t,n)},randomID:function(e=32){let t="";const n="0123456789abcdefghjklmnopqrstuvwxyz";for(let i=0;i<e;i++)t+=n[Math.floor(35*Math.random())];return t},randomInt:function(e,t){if(t<e)throw new Error("Upper boundary must be greater than or equal to lower boundary");return e+Math.floor(Math.random()*(t-e+1))},randomWords:function(e){return I(e)},repeat:K,sampleBernoulli:function(e){return Math.random()<=e?1:0},sampleExGaussian:function(e,t,n,i=!1){let s=W(e,t)+X(n);if(i)for(;s<=0;)s=W(e,t)+X(n);return s},sampleExponential:X,sampleNormal:W,sampleWithReplacement:Y,sampleWithoutReplacement:H,setSeed:function(e=Math.random().toString()){return Math.random=k(e),e},shuffle:J,shuffleAlternateGroups:U,shuffleNoRepeats:function(e,t){Array.isArray(e),void 0===t&&(t=function(e,t){return e===t});const n=J(e);for(let i=0;i<n.length-1;i++)if(t(n[i],n[i+1])){let e=Math.floor(Math.random()*(n.length-2))+1;for(;t(n[i+1],n[e])||t(n[i+1],n[e+1])||t(n[i+1],n[e-1])||t(n[i],n[e]);)e=Math.floor(Math.random()*(n.length-2))+1;const s=n[e];n[e]=n[i+1],n[i+1]=s}return n}});function Z(){const e={previewMode:!1,outsideTurk:!1,hitId:"INVALID_URL_PARAMETER",assignmentId:"INVALID_URL_PARAMETER",workerId:"INVALID_URL_PARAMETER",turkSubmitTo:"INVALID_URL_PARAMETER"},t=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==n?"":n[1]},n=t(window.location.href,"assignmentId")?window.location.href:document.referrer;return["assignmentId","hitId","workerId","turkSubmitTo"].map((function(i){e[i]=unescape(t(n,i))})),e.previewMode="ASSIGNMENT_ID_NOT_AVAILABLE"==e.assignmentId,e.outsideTurk=!e.previewMode&&""===e.hitId&&""==e.assignmentId&&""==e.workerId,e}var ee=Object.freeze({__proto__:null,submitToTurk:function(e){const t=Z(),n=t.assignmentId,i=t.turkSubmitTo;if(!n||!i)return;const s=document.createElement("form");s.method="POST",s.action=i+"/mturk/externalSubmit?assignmentId="+n;for(const r in e)if(e.hasOwnProperty(r)){const t=document.createElement("input");t.type="hidden",t.name=r,t.id=r,t.value=e[r],s.appendChild(t)}document.body.appendChild(s),s.submit()},turkInfo:Z});class te{constructor(e,t){this.containerElement=e,this.message=t,this._progress=0,this.setupElements()}setupElements(){this.messageSpan=document.createElement("span"),this.innerDiv=document.createElement("div"),this.innerDiv.id="jspsych-progressbar-inner",this.update();const e=document.createElement("div");e.id="jspsych-progressbar-outer",e.appendChild(this.innerDiv),this.containerElement.appendChild(this.messageSpan),this.containerElement.appendChild(e)}update(){this.innerDiv.style.width=100*this._progress+"%","function"==typeof this.message?this.messageSpan.innerHTML=this.message(this._progress):this.messageSpan.innerHTML=this.message}set progress(e){if("number"!=typeof e||e<0||e>1)throw new Error("jsPsych.progressBar.progress must be a number between 0 and 1");this._progress=e,this.update()}get progress(){return this._progress}}class ne{constructor(e){this.name=e}}const ie=["timeline","timeline_variables","name","repetitions","loop_function","conditional_function","randomize_order","sample","on_timeline_start","on_timeline_finish"];function se(e){return Boolean(e.timeline)||Array.isArray(e)}var re=(e=>(e[e.PENDING=0]="PENDING",e[e.RUNNING=1]="RUNNING",e[e.PAUSED=2]="PAUSED",e[e.COMPLETED=3]="COMPLETED",e[e.ABORTED=4]="ABORTED",e))(re||{});class ae{constructor(){this.reset()}reset(){this.promise=new Promise((e=>{this.resolvePromise=e}))}get(){return this.promise}resolve(e){this.resolvePromise(e),this.reset()}}function oe([e,...t]){let n=e??"";for(const i of t)n+=Number.isNaN(Number.parseInt(i))?`.${i}`:`[${i}]`;return n}class le{constructor(){this.cache=new Map}static lookupChild(e,t){let n,i=!1;return Number.isNaN(Number.parseInt(t))?Object.hasOwn(e,t)&&(i=!0,n=e[t]):Number.parseInt(t)<e.length&&(i=!0,n=e[t]),{doesPathExist:i,value:n}}get(e){return this.cache.get(e.join("."))}has(e){return this.cache.has(e.join("."))}initialize(e){this.rootObject=e,this.cache.set("",e)}reset(){this.cache.clear(),this.cache.set("",this.rootObject)}set(e,t){this.cache.set(e.join("."),t)}lookup(e){if(this.has(e))return{doesPathExist:!0,value:this.get(e)};const t=e=>{const n=e.slice(0,-1),i=e[e.length-1];if(!this.has(n)&&n.length>0&&!t(n).doesPathExist)return{doesPathExist:!1};const s=this.get(n);if("object"!=typeof(r=s)||null===r)return{doesPathExist:!1};var r;const a=le.lookupChild(s,i);return a.doesPathExist&&this.set(e,a.value),a};return t(e)}}class ue{constructor(e){this.dependencies=e,this.status=re.PENDING,this.parameterValueCache=new le}getStatus(){return this.status}initializeParameterValueCache(){this.parameterValueCache.initialize(this.description)}resetParameterValueCache(){var e;this.parameterValueCache.reset(),null==(e=this.parent)||e.resetParameterValueCache()}getParameterValue(e,t={}){const{evaluateFunctions:n=!0,recursive:i=!0,cacheResult:s=!0,replaceResult:r}=t;"string"==typeof e&&(e=[e]);let{doesPathExist:a,value:o}=this.parameterValueCache.lookup(e);return!a&&i&&this.parent&&(o=this.parent.getParameterValue(e,t)),"function"==typeof o&&n&&(o=o()),o instanceof ne&&(o=this.evaluateTimelineVariable(o)),"function"==typeof r&&(o=r(o)),s&&this.parameterValueCache.set(e,o),o}getDataParameter(){var e;const t=this.getParameterValue("data",{recursive:!1});return{...Object.fromEntries("object"==typeof t?Object.keys(t).map((e=>[e,this.getParameterValue(["data",e])])):[]),...null==(e=this.parent)?void 0:e.getDataParameter()}}}class ce extends ue{constructor(e,t,n){var i;if(super(e),this.description=t,this.parent=n,this.onLoad=()=>{this.runParameterCallback("on_load"),this.dependencies.runOnLoadExtensionCallbacks(this.getParameterValue("extensions"))},this.initializeParameterValueCache(),this.trialObject=O(t),this.pluginClass=this.getParameterValue("type",{evaluateFunctions:!1}),this.pluginInfo=null==(i=this.pluginClass)?void 0:i.info,!this.pluginInfo)throw new Error("Plugin not recognized. Please provide a valid plugin using the 'type' parameter.");("version"in this.pluginInfo||"data"in this.pluginInfo)&&"version"in this.pluginInfo&&this.pluginInfo}async run(){this.status=re.RUNNING,this.processParameters(),this.onStart(),this.addCssClasses(),this.pluginInstance=this.dependencies.instantiatePlugin(this.pluginClass),this.result=this.processResult(await this.executeTrial()),this.dependencies.onTrialResultAvailable(this),this.status=re.COMPLETED,await this.onFinish(),this.removeCssClasses();const e=this.getParameterValue("post_trial_gap")??this.dependencies.getDefaultIti();var t;0!==e&&"data-only"!==this.dependencies.getSimulationMode()&&await(t=e,new Promise((e=>setTimeout(e,t)))),this.resetParameterValueCache()}async executeTrial(){const e=this.dependencies.finishTrialPromise.get();let t=!1;e.then((()=>{t=!0}));const{trialReturnValue:n,hasTrialBeenSimulated:i}=this.invokeTrialMethod();let s;var r;return(r=n)&&"function"==typeof r.then?(s=await Promise.race([n,e]),t&&(s=await e)):(i||this.onLoad(),s=await e),this.cleanupTrial(),s}invokeTrialMethod(){const e=this.dependencies.getSimulationMode();if(e&&"function"==typeof this.pluginInstance.simulate){const t=this.getSimulationOptions();if(!1!==t.simulate)return{hasTrialBeenSimulated:!0,trialReturnValue:this.pluginInstance.simulate(this.trialObject,t.mode??e,t,this.onLoad)}}return{hasTrialBeenSimulated:!1,trialReturnValue:this.pluginInstance.trial(this.dependencies.getDisplayElement(),this.trialObject,this.onLoad)}}cleanupTrial(){this.dependencies.clearAllTimeouts(),this.dependencies.getDisplayElement().innerHTML=""}addCssClasses(){const e=this.getParameterValue("css_classes"),t=this.dependencies.getDisplayElement().classList;"string"==typeof e?t.add(e):Array.isArray(e)&&t.add(...e)}removeCssClasses(){const e=this.getParameterValue("css_classes");e&&this.dependencies.getDisplayElement().classList.remove(..."string"==typeof e?[e]:e)}processResult(e){e||(e={});for(const[n,i]of Object.entries(this.getParameterValue("save_trial_parameters")??{}))if(this.pluginInfo.parameters[n])if(i&&!Object.hasOwn(e,n)){let t=this.trialObject[n];"function"==typeof t&&(t=t.toString()),e[n]=t}else!i&&Object.hasOwn(e,n)&&delete e[n];e={...this.getDataParameter(),...e,trial_type:this.pluginInfo.name,trial_index:this.index,plugin_version:this.pluginInfo.version?this.pluginInfo.version:null};const t=this.getParameterValue("save_timeline_variables");return!0===t?e.timeline_variables={...this.parent.getAllTimelineVariables()}:Array.isArray(t)&&(e.timeline_variables=Object.fromEntries(Object.entries(this.parent.getAllTimelineVariables()).filter((([e,n])=>t.includes(e))))),e}runParameterCallback(e,...t){const n=this.getParameterValue(e,{evaluateFunctions:!1});if(n)return n(...t)}onStart(){this.dependencies.onTrialStart(this),this.runParameterCallback("on_start",this.trialObject),this.dependencies.runOnStartExtensionCallbacks(this.getParameterValue("extensions"))}async onFinish(){const e=await this.dependencies.runOnFinishExtensionCallbacks(this.getParameterValue("extensions"));Object.assign(this.result,e),await Promise.resolve(this.runParameterCallback("on_finish",this.getResult())),this.dependencies.onTrialFinished(this)}evaluateTimelineVariable(e){var t;return null==(t=this.parent)?void 0:t.evaluateTimelineVariable(e)}getParameterValue(e,t={}){return ie.includes("string"==typeof e?e:e[0])&&(t.recursive=!1),super.getParameterValue(e,t)}getSimulationOptions(){const e=this.getParameterValue("simulation_options",{replaceResult:(e={})=>{if("string"==typeof e){const t=this.dependencies.getGlobalSimulationOptions();e=t[e]??t.default??{}}return C(O(this.dependencies.getGlobalSimulationOptions().default),O(e))}});return void 0===e?{}:(e.mode=this.getParameterValue(["simulation_options","mode"]),e.simulate=this.getParameterValue(["simulation_options","simulate"]),e.data=this.getParameterValue(["simulation_options","data"]),"object"==typeof e.data&&(e.data=Object.fromEntries(Object.keys(e.data).map((e=>[e,this.getParameterValue(["simulation_options","data",e])])))),e)}getResult(){return!1===this.getParameterValue("record_data")?void 0:this.result}getResults(){const e=this.getResult();return e?[e]:[]}processParameters(){const e=(t,n,i=[])=>{for(const[s,r]of Object.entries(n)){const n=[...i,s];let a=this.getParameterValue(n,{evaluateFunctions:r.type!==D.FUNCTION,replaceResult:e=>{if(void 0===e){if(void 0===r.default)throw new Error(`You must specify a value for the "${oe(n)}" parameter in the "${this.pluginInfo.name}" plugin.`);return r.default}return e}});if(r.array&&!Array.isArray(a)){const e=oe(n);throw new Error(`A non-array value (\`${a}\`) was provided for the array parameter "${e}" in the "${this.pluginInfo.name}" plugin. Please make sure that "${e}" is an array.`)}r.type===D.COMPLEX&&r.nested&&(r.array?a=a.map(((t,i)=>{const s=[...n,i.toString()],a=this.getParameterValue(s);return e(a,r.nested,s),a})):e(a,r.nested,n)),t[s]=a}},t=O(this.description);e(t,this.pluginInfo.parameters),this.trialObject=t}getLatestNode(){return this}getActiveTimelineByName(e){}}class de extends ue{constructor(e,t,n){super(e),this.parent=n,this.children=[],this.shouldAbort=!1,this.resumePromise=new ae,this.description=Array.isArray(t)?{timeline:t}:t,this.initializeParameterValueCache()}async run(){void 0===this.index&&(this.index=0),this.status=re.RUNNING;const{conditional_function:e,loop_function:t,repetitions:n=1}=this.description;let i=this.generateTimelineVariableOrder();this.setCurrentTimelineVariablesByIndex(i[0]);let s,r=!0;if(!e||e()){this.onStart();for(let e=0;e<n;e++)do{s=[],r?r=!1:i=this.generateTimelineVariableOrder();for(const e of i){this.setCurrentTimelineVariablesByIndex(e);for(const e of this.description.timeline){const t=this.instantiateChildNode(e),n=this.currentChild;if(this.currentChild=t,t.index=n?n.getLatestNode().index+1:this.index,await t.run(),this.status===re.PAUSED&&await this.resumePromise.get(),this.shouldAbort)return void(this.status=re.ABORTED);s.push(...this.currentChild.getResults())}}}while(t&&t(new R(s)));this.onFinish()}this.status=re.COMPLETED}onStart(){this.description.on_timeline_start&&this.description.on_timeline_start()}onFinish(){this.description.on_timeline_finish&&this.description.on_timeline_finish()}pause(){this.currentChild instanceof de&&this.currentChild.pause(),this.status=re.PAUSED}resume(){this.status==re.PAUSED&&(this.currentChild instanceof de&&this.currentChild.resume(),this.status=re.RUNNING,this.resumePromise.resolve())}abort(){this.status!==re.RUNNING&&this.status!==re.PAUSED||(this.currentChild instanceof de&&this.currentChild.abort(),this.shouldAbort=!0,this.status===re.PAUSED&&this.resume())}instantiateChildNode(e){const t=se(e)?new de(this.dependencies,e,this):new ce(this.dependencies,e,this);return this.children.push(t),t}setCurrentTimelineVariablesByIndex(e){var t;this.currentTimelineVariables={...null==(t=this.parent)?void 0:t.getAllTimelineVariables(),...null===e?void 0:this.description.timeline_variables[e]}}generateTimelineVariableOrder(){var e;const t=null==(e=this.description.timeline_variables)?void 0:e.length;if(!t)return[null];let n=[...Array(t).keys()];const i=this.description.sample;if(i)switch(i.type){case"custom":n=i.fn(n);break;case"with-replacement":n=Y(n,i.size,i.weights);break;case"without-replacement":n=H(n,i.size);break;case"fixed-repetitions":n=K(n,i.size);break;case"alternate-groups":n=U(i.groups,i.randomize_group_order);break;default:throw new Error(`Invalid type "${i.type}" in timeline sample parameters. Valid options for type are "custom", "with-replacement", "without-replacement", "fixed-repetitions", and "alternate-groups"`)}return this.description.randomize_order&&(n=J(n)),n}getAllTimelineVariables(){return this.currentTimelineVariables}evaluateTimelineVariable(e){var t;if(null==(t=this.currentTimelineVariables)?void 0:t.hasOwnProperty(e.name))return this.currentTimelineVariables[e.name];throw new Error(`Timeline variable ${e.name} not found.`)}getResults(){const e=[];for(const t of this.children)if(t instanceof ce){const n=t.getResult();n&&e.push(n)}else t instanceof de&&e.push(...t.getResults());return e}getNaiveProgress(){if(this.status===re.PENDING)return 0;const e=this.getLatestNode();if(!e)return 1;let t=e.index;return e.getStatus()===re.COMPLETED&&t++,Math.min(t/this.getNaiveTrialCount(),1)}getNaiveTrialCount(){const e=t=>{var n,i;const s=t=>t.map((t=>e(t))).reduce(((e,t)=>e+t));if(Array.isArray(t))return s(t);if(function(e){return!se(e)}(t))return 1;if(se(t)){let e=(null==(n=t.timeline_variables)?void 0:n.length)||1;switch(null==(i=t.sample)?void 0:i.type){case"with-replacement":case"without-replacement":e=t.sample.size;break;case"fixed-repetitions":e*=t.sample.size;break;case"alternate-groups":e=t.sample.groups.map((e=>e.length)).reduce(((e,t)=>e+t),0)}return s(t.timeline)*(t.repetitions??1)*e}return 0};return e(this.description)}getLatestNode(){var e;return(null==(e=this.currentChild)?void 0:e.getLatestNode())??this}getActiveTimelineByName(e){var t;return this.description.name===e?this:null==(t=this.currentChild)?void 0:t.getActiveTimelineByName(e)}}class he{constructor(e){this.turk=ee,this.randomization=Q,this.utils=M,this.citation={apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '},this.options={},this.isFileProtocolUsed=!1,this.finishTrialPromise=new ae,this.timelineDependencies={onTrialStart:e=>{this.options.on_trial_start(e.trialObject),this.getDisplayContainerElement().focus(),this.getDisplayElement().scrollTop=0},onTrialResultAvailable:e=>{const t=e.getResult();t&&(t.time_elapsed=this.getTotalTime(),this.data.write(e))},onTrialFinished:e=>{const t=e.getResult();this.options.on_trial_finish(t),t&&this.options.on_data_update(t),this.progressBar&&this.options.auto_update_progress_bar&&(this.progressBar.progress=this.timeline.getNaiveProgress())},runOnStartExtensionCallbacks:e=>this.extensionManager.onStart(e),runOnLoadExtensionCallbacks:e=>this.extensionManager.onLoad(e),runOnFinishExtensionCallbacks:e=>this.extensionManager.onFinish(e),getSimulationMode:()=>this.simulationMode,getGlobalSimulationOptions:()=>this.simulationOptions,instantiatePlugin:e=>new e(this),getDisplayElement:()=>this.getDisplayElement(),getDefaultIti:()=>this.getInitSettings().default_iti,finishTrialPromise:this.finishTrialPromise,clearAllTimeouts:()=>this.pluginAPI.clearAllTimeouts()},this.extensionManagerDependencies={instantiateExtension:e=>new e(this)},this.dataDependencies={getProgress:()=>{var e;return{time:this.getTotalTime(),trial:(null==(e=this.timeline)?void 0:e.getLatestNode().index)??0}},onInteractionRecordAdded:e=>{this.options.on_interaction_data_update(e)},getDisplayElement:()=>this.getDisplayElement()},e={display_element:void 0,on_finish:()=>{},on_trial_start:()=>{},on_trial_finish:()=>{},on_data_update:()=>{},on_interaction_data_update:()=>{},on_close:()=>{},use_webaudio:!0,show_progress_bar:!1,message_progress_bar:"Completion Progress",auto_update_progress_bar:!0,default_iti:0,minimum_valid_rt:0,experiment_width:null,override_safe_mode:!1,case_sensitive_responses:!1,extensions:[],...e},this.options=e,s(this),"file:"!=window.location.protocol||!1!==e.override_safe_mode&&void 0!==e.override_safe_mode||(e.use_webaudio=!1,this.isFileProtocolUsed=!0),this.data=new q(this.dataDependencies),this.pluginAPI=function(e){const t=e.getInitSettings(),n=new $(e.getDisplayContainerElement,t.case_sensitive_responses,t.minimum_valid_rt),i=new F,r=new V(t.use_webaudio),a=new G(e.getDisplayContainerElement,i.setTimeout.bind(i));return Object.assign({},...[n,i,r,a].map((e=>s(e))))}(this),this.extensionManager=new L(this.extensionManagerDependencies,e.extensions)}version(){return"8.2.1"}async run(e){e.length,this.timeline=new de(this.timelineDependencies,e),await this.prepareDom(),await this.extensionManager.initializeExtensions(),document.documentElement.setAttribute("jspsych","present"),this.experimentStartTime=new Date,await this.timeline.run(),await Promise.resolve(this.options.on_finish(this.data.get())),this.endMessage&&(this.getDisplayElement().innerHTML=this.endMessage),this.data.removeInteractionListeners()}async simulate(e,t="data-only",n={}){this.simulationMode=t,this.simulationOptions=n,await this.run(e)}getProgress(){var e,t,n;return{total_trials:null==(e=this.timeline)?void 0:e.getNaiveTrialCount(),current_trial_global:(null==(t=this.timeline)?void 0:t.getLatestNode().index)??0,percent_complete:100*(null==(n=this.timeline)?void 0:n.getNaiveProgress())}}getStartTime(){return this.experimentStartTime}getTotalTime(){return this.experimentStartTime?(new Date).getTime()-this.experimentStartTime.getTime():0}getDisplayElement(){return this.displayElement}getDisplayContainerElement(){return this.displayContainerElement}abortExperiment(e,t={}){this.endMessage=e,this.timeline.abort(),this.pluginAPI.cancelAllKeyboardResponses(),this.pluginAPI.clearAllTimeouts(),this.finishTrial(t)}abortCurrentTimeline(){var e;let t=null==(e=this.timeline)?void 0:e.getLatestNode();t instanceof ce&&(t=t.parent),t instanceof de&&t.abort()}abortTimelineByName(e){var t;const n=null==(t=this.timeline)?void 0:t.getActiveTimelineByName(e);n&&n.abort()}getCurrentTrial(){var e;const t=null==(e=this.timeline)?void 0:e.getLatestNode();if(t instanceof ce)return t.description}getInitSettings(){return this.options}timelineVariable(e){return new ne(e)}evaluateTimelineVariable(e){var t,n;return null==(n=null==(t=this.timeline)?void 0:t.getLatestNode())?void 0:n.evaluateTimelineVariable(new ne(e))}pauseExperiment(){var e;null==(e=this.timeline)||e.pause()}resumeExperiment(){var e;null==(e=this.timeline)||e.resume()}getSafeModeStatus(){return this.isFileProtocolUsed}getTimeline(){var e;return null==(e=this.timeline)?void 0:e.description.timeline}getCitations(e=[],t="apa"){if(t=t.toLowerCase(),Array.isArray(e)){if(["apa","bibtex"].includes(t)){const n=this.citation[t],i=new Set([n]);for(const s of e)try{const e=s.info.citations[t];i.add(e)}catch{}return Array.from(i).join("\n")}throw new Error("Unsupported citation format")}throw new Error("Expected array of plugins/extensions")}get extensions(){var e;return(null==(e=this.extensionManager)?void 0:e.extensions)??{}}async prepareDom(){"complete"!==document.readyState&&await new Promise((e=>{window.addEventListener("load",e)}));const e=this.options;if(void 0===e.display_element){let t=document.body;t||(t=document.createElement("body"),document.documentElement.appendChild(t)),document.querySelector("html").style.height="100%",t.style.margin="0px",t.style.height="100%",t.style.width="100%",e.display_element=t}else{const t=e.display_element instanceof Element?e.display_element:document.querySelector("#"+e.display_element);null===t||(e.display_element=t)}const t=document.createElement("div");t.id="jspsych-content";const n=document.createElement("div");if(n.className="jspsych-content-wrapper",n.appendChild(t),this.displayContainerElement=e.display_element,this.displayContainerElement.appendChild(n),this.displayElement=t,null!==e.experiment_width&&(this.displayElement.style.width=e.experiment_width+"px"),e.display_element.tabIndex=0,this.displayContainerElement.classList.add("jspsych-display-element"),this.displayElement.classList.add("jspsych-content"),this.data.createInteractionListeners(),window.addEventListener("beforeunload",e.on_close),this.options.show_progress_bar){const e=document.createElement("div");e.id="jspsych-progressbar-container",this.progressBar=new te(e,this.options.message_progress_bar),this.getDisplayContainerElement().insertAdjacentElement("afterbegin",e)}}finishTrial(e){this.finishTrialPromise.resolve(e)}}class pe extends Error{constructor(e="The global `jsPsych` variable is no longer available in jsPsych v7."){super(`${e} Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment.`),this.name="MigrationError"}}function me(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}window.jsPsych={get init(){throw new pe("`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.")},get data(){throw new pe},get randomization(){throw new pe},get turk(){throw new pe},get pluginAPI(){throw new pe},get ALL_KEYS(){throw new pe('jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.')},get NO_KEYS(){throw new pe('jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.')}},"undefined"!=typeof window&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext);const fe=[0,90,180,270],ge=100,ye=1e3/30,_e={pixels_per_unit:ge,resize_units:"deg",fixation_diameter_deg:.33,fixation_diameter_pix:33,noise_diameter_deg:6,noise_element_pix:4,noise_speed_deg:4,adapt_duration_ms:3e4,n_condition_repeat:3,stimulus_options:fe,noise_diameter_pix:600,noise_canvas_diameter_pix:150,noise_canvas_one_run_duration:4.5,stimulus_directions:function(e,t){if(0===e.length)throw new Error("Cannot sample from an empty array");const n=[];let i=Math.floor(Math.random()*e.length);n.push(e[i]);for(let s=1;s<t;s++){let t=Math.floor(Math.random()*(e.length-1));t>=i&&t++,n.push(e[t]),i=t}return n}(fe,12),rest_min_duration_ms:3e4,sine_grating_diameter_deg:6,sine_grating_cycle_per_deg:1,sine_adapt_speed_deg_per_sec:2,sine_grating_diameter_pix:600,sine_grating_pix_per_cycle:100,sine_grating_pix_per_sec:200,allow_early_abort:!0,early_abort_keys:["q"],enable_adapt_finish_prompt:!0,noise_dynamic_target_fps:30,noise_dynamic_frame_duration:ye,sine_test_speed_deg_per_sec:2,sine_test_speed_pix_per_sec:100};function ve(e){let t=function(e){let t=Math.ceil(e/4),n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=Math.floor(4294967296*Math.random());return new Uint8Array(n.buffer,0,e)}(e.data.length/4);for(let n=0;n<t.length;n++)e.data[4*n]=t[n],e.data[4*n+1]=t[n],e.data[4*n+2]=t[n],e.data[4*n+3]=255}function be(e,t,n){let i=e.createImageData(t,n);return ve(i),i}function we(e,t,n){const i=document.createElement("canvas");i.width=e,i.height=e;const s=i.getContext("2d");return s.beginPath(),s.arc(e/2,e/2,e/2-t/2,0,2*Math.PI),s.strokeStyle="black",s.lineWidth=t,s.fillStyle=n,s.fill(),s.stroke(),s.beginPath(),s.arc(e/2,e/2,t,0,2*Math.PI),s.fillStyle="black",s.fill(),i.style.position="absolute",i.style.left="50%",i.style.top="50%",i.style.transform="translate(-50%, -50%)",i}function xe(e,t,n,i){const s=function(e,t,n){const i=new Uint8ClampedArray(n);for(let s=0;s<n;s++)i[s]=Math.round(127.5*Math.sin(2*Math.PI*s/t+e)+127.5);return i}(e,t,n),r=function(e,t){const n=e.length,i=new ImageData(n,t);i.data;const s=new Uint32Array(i.data.buffer),r=new Uint32Array(e.length);for(let a=0;a<e.length;a++)r[a]=4278190080|e[a]<<16|e[a]<<8|e[a];for(let a=0;a<t;a++)s.set(r,a*n);return i}(s,i),a=document.createElement("canvas");a.width=n,a.height=i;const o=a.getContext("2d");return o.putImageData(r,0,0),{canvas:a,ctx:o}}function je(e,t,n,i){const s=n/e,r=Math.ceil(1.5*s),a=r*e,{canvas:o,ctx:l}=xe(0,e,a,i),u=r-s,c=u/s,d=u*e/t*1e3;o.style.position="absolute";const h=[{left:`-${100*c}%`},{left:"0"}],p={duration:d,easing:"linear",iterations:1/0},m=o.animate(h,p);return{canvas:o,ctx:l,animate:m}}const Ee={name:"html-keyboard-response",version:"2.1.0",parameters:{stimulus:{type:D.HTML_STRING,default:void 0},choices:{type:D.KEYS,default:"ALL_KEYS"},prompt:{type:D.HTML_STRING,default:null},stimulus_duration:{type:D.INT,default:null},trial_duration:{type:D.INT,default:null},response_ends_trial:{type:D.BOOL,default:!0}},data:{response:{type:D.STRING},rt:{type:D.INT},stimulus:{type:D.STRING}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}},Pe=class{constructor(e){this.jsPsych=e}trial(e,t){var n='<div id="jspsych-html-keyboard-response-stimulus">'+t.stimulus+"</div>";null!==t.prompt&&(n+=t.prompt),e.innerHTML=n;var i={rt:null,key:null};const s=()=>{void 0!==r&&this.jsPsych.pluginAPI.cancelKeyboardResponse(r);var e={rt:i.rt,stimulus:t.stimulus,response:i.key};this.jsPsych.finishTrial(e)};if("NO_KEYS"!=t.choices)var r=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:n=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").className+=" responded",null==i.key&&(i=n),t.response_ends_trial&&s()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(s,t.trial_duration)}simulate(e,t,n,i){"data-only"==t&&(i(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,i)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},i=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,i),i}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const i=this.create_simulation_data(e,t),s=this.jsPsych.getDisplayElement();this.trial(s,e),n(),null!==i.rt&&this.jsPsych.pluginAPI.pressKey(i.response,i.rt)}};Pe.info=Ee;let Te=Pe;const Se={name:"virtual-chinrest",version:"3.1.0",parameters:{resize_units:{type:D.SELECT,options:["none","cm","inch","deg"],default:"none"},pixels_per_unit:{type:D.INT,default:100},adjustment_prompt:{type:D.HTML_STRING,default:'\n          <div style="text-align: left;">\n          <p>Click and drag the lower right corner of the image until it is the same size as a credit card held up to the screen.</p>\n          <p>You can use any card that is the same size as a credit card, like a membership card or driver\'s license.</p>\n          <p>If you do not have access to a real card you can use a ruler to measure the image width to 3.37 inches or 85.6 mm.</p>\n          </div>'},adjustment_button_prompt:{type:D.HTML_STRING,default:"Click here when the image is the correct size"},item_path:{type:D.IMAGE,default:null,preload:!1},item_height_mm:{type:D.FLOAT,default:53.98},item_width_mm:{type:D.FLOAT,default:85.6},item_init_size:{type:D.INT,default:250},blindspot_reps:{type:D.INT,default:5},blindspot_prompt:{type:D.HTML_STRING,pretty_name:"Blindspot prompt",default:'\n          <p>Now we will quickly measure how far away you are sitting.</p>\n          <div style="text-align: left">\n            <ol>\n              <li>Put your left hand on the <b>space bar</b>.</li>\n              <li>Cover your right eye with your right hand.</li>\n              <li>Using your left eye, focus on the black square. Keep your focus on the black square.</li>\n              <li>The <span style="color: red; font-weight: bold;">red ball</span> will disappear as it moves from right to left. Press the space bar as soon as the ball disappears.</li>\n            </ol>\n          </div>\n          <p>Press the space bar when you are ready to begin.</p>\n          '},blindspot_measurements_prompt:{type:D.HTML_STRING,default:"Remaining measurements: "},viewing_distance_report:{type:D.HTML_STRING,default:"<p>Based on your responses, you are sitting about <span id='distance-estimate' style='font-weight: bold;'></span> from the screen.</p><p>Does that seem about right?</p>"},redo_measurement_button_label:{type:D.HTML_STRING,default:"No, that is not close. Try again."},blindspot_done_prompt:{type:D.HTML_STRING,default:"Yes"}},data:{rt:{type:D.INT},item_height_mm:{type:D.FLOAT},item_width_mm:{type:D.FLOAT},item_height_deg:{type:D.FLOAT},item_width_deg:{type:D.FLOAT},item_width_px:{type:D.FLOAT},px2deg:{type:D.INT},px2mm:{type:D.FLOAT},scale_factor:{type:D.FLOAT},win_width_deg:{type:D.FLOAT},win_height_deg:{type:D.FLOAT},view_dist_mm:{type:D.FLOAT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}},Ie=class{constructor(e){this.jsPsych=e,this.ball_size=30,this.ball=null,this.container=null,this.reps_remaining=0,this.ball_animation_frame_id=null}trial(e,t){if(!(t.blindspot_reps>0||"deg"!=t.resize_units&&"degrees"!=t.resize_units))return;this.reps_remaining=t.blindspot_reps;let n={item_width_mm:t.item_width_mm,item_height_mm:t.item_height_mm},i={ball_pos:[]},s=t.item_width_mm/t.item_height_mm;const r=s<1?t.item_init_size:Math.round(t.item_init_size/s),a=s<1?Math.round(t.item_init_size*s):t.item_init_size,o=Math.round(.1*a);let l=`\n        <div id="page-size">\n          <div id="item" style="border: none; height: ${r}px; width: ${a}px; margin: 5px auto; background-color: #ddd; position: relative; ${null===t.item_path?"":`background-image: url(${t.item_path}); background-size: 100% auto; background-repeat: no-repeat;`}">\n            <div id="jspsych-resize-handle" style="cursor: nwse-resize; background-color: none; width: ${o}px; height: ${o}px; border: 5px solid red; border-left: 0; border-top: 0; position: absolute; bottom: 0; right: 0;">\n            </div>\n          </div>\n          ${t.adjustment_prompt}\n          <button id="end_resize_phase" class="jspsych-btn">\n            ${t.adjustment_button_prompt}\n          </button>\n        </div>\n      `,u=`\n        <div id="blind-spot">\n          ${t.blindspot_prompt}\n          <div id="svgDiv" style="height:100px; position:relative;"></div>\n          <button class="btn btn-primary" id="proceed" style="display:none;"> +\n            ${t.blindspot_done_prompt} +\n          </button>\n          ${t.blindspot_measurements_prompt} \n          <div id="click" style="display:inline; color: red"> ${t.blindspot_reps} </div>\n        </div>`,c=`\n        <div id="distance-report">\n          <div id="info-h">\n            ${t.viewing_distance_report}\n          </div>\n          <button id="redo_blindspot" class="jspsych-btn">${t.redo_measurement_button_label}</button>\n          <button id="proceed" class="jspsych-btn">${t.blindspot_done_prompt}</button>\n        </div>\n      `;e.innerHTML='<div id="content" style="width: 900px; margin: 0 auto;"></div>';const d=performance.now();function h(){const e=document.querySelector("#item").getBoundingClientRect().width;n.item_width_px=Math.round(e);const i=function(e){const t=e/n.item_width_mm;return t}(e);n.px2mm=w(i,2),t.blindspot_reps>0?p():y()}!function(){e.querySelector("#content").innerHTML=l;let t,n,i,r,a=!1;const o=e.querySelector("#item");document.addEventListener("mouseup",(function(){a=!1})),e.querySelector("#jspsych-resize-handle").addEventListener("mousedown",(function(e){e.preventDefault(),a=!0,t=e.pageX,n=e.pageY,i=parseInt(o.style.width),r=parseInt(o.style.height)})),e.addEventListener("mousemove",(function(e){if(a){let a=e.pageX-t,l=e.pageY-n;Math.abs(a)>=Math.abs(l)?(o.style.width=Math.round(Math.max(20,i+2*a))+"px",o.style.height=Math.round(Math.max(20,i+2*a)/s)+"px"):(o.style.height=Math.round(Math.max(20,r+2*l))+"px",o.style.width=Math.round(s*Math.max(20,r+2*l))+"px")}})),e.querySelector("#end_resize_phase").addEventListener("click",h)}();const p=()=>{i={ball_pos:[],slider_clck:!1},e.querySelector("#content").innerHTML=u,this.container=e.querySelector("#svgDiv"),_(),m()},m=()=>{const e=.85*(this.container.getBoundingClientRect().width-this.ball_size);this.ball.style.left=`${e}px`,this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:f,valid_responses:[" "],rt_method:"performance",allow_held_key:!1,persist:!1})},f=()=>{this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:b,valid_responses:[" "],rt_method:"performance",allow_held_key:!1,persist:!1}),this.ball_animation_frame_id=requestAnimationFrame(v)},g=()=>{const s=i.ball_pos.reduce(((e,t)=>e+t),0),r=i.ball_pos.length;i.avg_ball_pos=w(s/r,2);const a=(i.square_pos-i.avg_ball_pos)/n.px2mm/Math.tan(j(13.5));n.view_dist_mm=w(a,2),"none"==t.viewing_distance_report?y():(e.querySelector("#content").innerHTML=c,e.querySelector("#distance-estimate").innerHTML=`\n          ${Math.round(n.view_dist_mm/10)} cm (${Math.round(.0393701*n.view_dist_mm)} inches)\n        `,e.querySelector("#redo_blindspot").addEventListener("click",p),e.querySelector("#proceed").addEventListener("click",y))};const y=()=>{n.rt=Math.round(performance.now()-d),this.jsPsych.pluginAPI.cancelAllKeyboardResponses(),function(){n.item_width_deg=2*Math.atan(n.item_width_mm/2/n.view_dist_mm)*180/Math.PI,n.px2deg=n.item_width_px/n.item_width_deg;let e=0;switch(t.resize_units){case"cm":case"centimeters":e=10*n.px2mm;break;case"inch":case"inches":e=25.4*n.px2mm;break;case"deg":case"degrees":e=n.px2deg}if(e>0){let i=e/t.pixels_per_unit;document.getElementById("jspsych-content").style.transform="scale("+i+")",n.px2deg=n.px2deg/i,n.px2mm=n.px2mm/i,n.item_width_px=n.item_width_px/i,n.scale_factor=i}t.blindspot_reps>0?(n.win_width_deg=window.innerWidth/n.px2deg,n.win_height_deg=window.innerHeight/n.px2deg):(delete n.px2deg,delete n.item_width_deg)}(),this.jsPsych.finishTrial(n)},_=()=>{this.container.innerHTML=`\n        <div id="virtual-chinrest-circle" style="position: absolute; background-color: #f00; width: ${this.ball_size}px; height: ${this.ball_size}px; border-radius:${this.ball_size}px;"></div>\n        <div id="virtual-chinrest-square" style="position: absolute; background-color: #000; width: ${this.ball_size}px; height: ${this.ball_size}px;"></div>\n      `;const e=this.container.querySelector("#virtual-chinrest-circle"),t=this.container.querySelector("#virtual-chinrest-square"),n=this.container.getBoundingClientRect().width-this.ball_size,s=.85*n;e.style.left=`${s}px`,t.style.left=`${n}px`,this.ball=e,i.square_pos=w(x(t).x,2)},v=()=>{const e=parseInt(this.ball.style.left);this.ball.style.left=`${e+-2}px`,this.ball_animation_frame_id=requestAnimationFrame(v)},b=()=>{cancelAnimationFrame(this.ball_animation_frame_id),i.ball_pos.push(w(x(this.ball).x,2)),this.reps_remaining--,document.querySelector("#click").textContent=Math.max(this.reps_remaining,0).toString(),this.reps_remaining<=0?g():m()};function w(e,t){return Number(Math.round(Number(e+"e"+t))+"e-"+t)}function x(e){const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}const j=e=>e*Math.PI/180}};Ie.info=Se;let ke=Ie;const Le={name:"html-button-response",version:"2.1.0",parameters:{stimulus:{type:D.HTML_STRING,default:void 0},choices:{type:D.STRING,default:void 0,array:!0},button_html:{type:D.FUNCTION,default:function(e,t){return`<button class="jspsych-btn">${e}</button>`}},prompt:{type:D.HTML_STRING,default:null},stimulus_duration:{type:D.INT,default:null},trial_duration:{type:D.INT,default:null},button_layout:{type:D.STRING,default:"grid"},grid_rows:{type:D.INT,default:1},grid_columns:{type:D.INT,default:null},response_ends_trial:{type:D.BOOL,default:!0},enable_button_after:{type:D.INT,default:0}},data:{rt:{type:D.INT},response:{type:D.INT},stimulus:{type:D.HTML_STRING}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}},Ae=class{constructor(e){this.jsPsych=e}trial(e,t){const n=document.createElement("div");n.id="jspsych-html-button-response-stimulus",n.innerHTML=t.stimulus,e.appendChild(n);const i=document.createElement("div");if(i.id="jspsych-html-button-response-btngroup","grid"===t.button_layout){if(i.classList.add("jspsych-btn-group-grid"),null===t.grid_rows&&null===t.grid_columns)throw new Error("You cannot set `grid_rows` to `null` without providing a value for `grid_columns`.");const e=null===t.grid_columns?Math.ceil(t.choices.length/t.grid_rows):t.grid_columns,n=null===t.grid_rows?Math.ceil(t.choices.length/t.grid_columns):t.grid_rows;i.style.gridTemplateColumns=`repeat(${e}, 1fr)`,i.style.gridTemplateRows=`repeat(${n}, 1fr)`}else"flex"===t.button_layout&&i.classList.add("jspsych-btn-group-flex");for(const[c,d]of t.choices.entries()){i.insertAdjacentHTML("beforeend",t.button_html(d,c));const e=i.lastChild;e.dataset.choice=c.toString(),e.addEventListener("click",(()=>{o(c)}))}e.appendChild(i),null!==t.prompt&&e.insertAdjacentHTML("beforeend",t.prompt);var s=performance.now(),r={rt:null,button:null};const a=()=>{var e={rt:r.rt,stimulus:t.stimulus,response:r.button};this.jsPsych.finishTrial(e)};function o(e){var o=performance.now(),l=Math.round(o-s);r.button=parseInt(e),r.rt=l,n.classList.add("responded");for(const t of i.children)t.setAttribute("disabled","disabled");t.response_ends_trial&&a()}if(null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{n.style.visibility="hidden"}),t.stimulus_duration),t.enable_button_after>0){for(var l=document.querySelectorAll("#jspsych-html-button-response-btngroup button"),u=0;u<l.length;u++)l[u].setAttribute("disabled","disabled");this.jsPsych.pluginAPI.setTimeout((()=>{for(var e=document.querySelectorAll("#jspsych-html-button-response-btngroup button"),t=0;t<e.length;t++)e[t].removeAttribute("disabled")}),t.enable_button_after)}null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(a,t.trial_duration)}simulate(e,t,n,i){"data-only"==t&&(i(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,i)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0)+e.enable_button_after,response:this.jsPsych.randomization.randomInt(0,e.choices.length-1)},i=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,i),i}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const i=this.create_simulation_data(e,t),s=this.jsPsych.getDisplayElement();this.trial(s,e),n(),null!==i.rt&&this.jsPsych.pluginAPI.clickTarget(s.querySelector(`#jspsych-html-button-response-btngroup [data-choice="${i.response}"]`),i.rt)}};Ae.info=Le;let Oe=Ae;const Ce={name:"fullscreen",version:"2.1.0",parameters:{fullscreen_mode:{type:D.BOOL,default:!0,array:!1},message:{type:D.HTML_STRING,default:"<p>The experiment will switch to full screen mode when you press the button below</p>",array:!1},button_label:{type:D.STRING,default:"Continue",array:!1},delay_after:{type:D.INT,default:1e3,array:!1}},data:{success:{type:D.BOOL,default:null,description:"True if the user entered fullscreen mode, false if not."},rt:{type:D.INT,default:null,description:"Time in milliseconds until the user entered fullscreen mode."}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}},Me=class{constructor(e){this.jsPsych=e,this.rt=null,this.start_time=0}trial(e,t){"undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element?this.endTrial(e,!1,t):t.fullscreen_mode?this.showDisplay(e,t):(this.exitFullScreen(),this.endTrial(e,!0,t))}showDisplay(e,t){e.innerHTML=`\n      ${t.message}\n      <button id="jspsych-fullscreen-btn" class="jspsych-btn">${t.button_label}</button>\n    `,e.querySelector("#jspsych-fullscreen-btn").addEventListener("click",(()=>{this.rt=Math.round(performance.now()-this.start_time),this.enterFullScreen(),this.endTrial(e,!0,t)})),this.start_time=performance.now()}endTrial(e,t,n){e.innerHTML="",this.jsPsych.pluginAPI.setTimeout((()=>{var e={success:t,rt:this.rt};this.jsPsych.finishTrial(e)}),n.delay_after)}enterFullScreen(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}exitFullScreen(){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}simulate(e,t,n,i){"data-only"==t&&(i(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,i)}create_simulation_data(e,t){const n={success:!0,rt:this.jsPsych.randomization.sampleExGaussian(1e3,100,.005,!0)};return this.jsPsych.pluginAPI.mergeSimulationData(n,t)}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const i=this.create_simulation_data(e,t),s=this.jsPsych.getDisplayElement();!1===i.success?this.endTrial(s,!1,e):(this.trial(s,e),n(),this.jsPsych.pluginAPI.clickTarget(s.querySelector("#jspsych-fullscreen-btn"),i.rt))}};Me.info=Ce;let Ne=Me;const Re={name:"html-slider-response",version:"2.1.0",parameters:{stimulus:{type:D.HTML_STRING,default:void 0},min:{type:D.INT,default:0},max:{type:D.INT,default:100},slider_start:{type:D.INT,default:50},step:{type:D.INT,default:1},labels:{type:D.HTML_STRING,default:[],array:!0},slider_width:{type:D.INT,default:null},button_label:{type:D.STRING,default:"Continue",array:!1},require_movement:{type:D.BOOL,default:!1},prompt:{type:D.HTML_STRING,default:null},stimulus_duration:{type:D.INT,default:null},trial_duration:{type:D.INT,default:null},response_ends_trial:{type:D.BOOL,default:!0}},data:{rt:{type:D.INT},response:{type:D.INT},stimulus:{type:D.HTML_STRING},slider_start:{type:D.INT}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}},qe=class{constructor(e){this.jsPsych=e}trial(e,t){var n='<div id="jspsych-html-slider-response-wrapper" style="margin: 100px 0px;">';n+='<div id="jspsych-html-slider-response-stimulus">'+t.stimulus+"</div>",n+='<div class="jspsych-html-slider-response-container" style="position:relative; margin: 0 auto 3em auto; ',null!==t.slider_width?n+="width:"+t.slider_width+"px;":n+="width:auto;",n+='">',n+='<input type="range" class="jspsych-slider" value="'+t.slider_start+'" min="'+t.min+'" max="'+t.max+'" step="'+t.step+'" id="jspsych-html-slider-response-response"></input>',n+="<div>";for(var i=0;i<t.labels.length;i++){var s=100/(t.labels.length-1),r=i*(100/(t.labels.length-1));n+='<div style="border: 1px solid transparent; display: inline-block; position: absolute; left:calc('+r+"% - ("+s+"% / 2) - "+7.5*((r-50)/50*100)/100+"px); text-align: center; width: "+s+'%;">',n+='<span style="text-align: center; font-size: 80%;">'+t.labels[i]+"</span>",n+="</div>"}n+="</div>",n+="</div>",n+="</div>",null!==t.prompt&&(n+=t.prompt),n+='<button id="jspsych-html-slider-response-next" class="jspsych-btn" '+(t.require_movement?"disabled":"")+">"+t.button_label+"</button>",e.innerHTML=n;var a={rt:null,response:null};if(t.require_movement){const t=()=>{e.querySelector("#jspsych-html-slider-response-next").disabled=!1};e.querySelector("#jspsych-html-slider-response-response").addEventListener("mousedown",t),e.querySelector("#jspsych-html-slider-response-response").addEventListener("touchstart",t),e.querySelector("#jspsych-html-slider-response-response").addEventListener("change",t)}const o=()=>{var e={rt:a.rt,stimulus:t.stimulus,slider_start:t.slider_start,response:a.response};this.jsPsych.finishTrial(e)};e.querySelector("#jspsych-html-slider-response-next").addEventListener("click",(()=>{var n=performance.now();a.rt=Math.round(n-l),a.response=e.querySelector("#jspsych-html-slider-response-response").valueAsNumber,t.response_ends_trial?o():e.querySelector("#jspsych-html-slider-response-next").disabled=!0})),null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{e.querySelector("#jspsych-html-slider-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(o,t.trial_duration);var l=performance.now()}simulate(e,t,n,i){"data-only"==t&&(i(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,i)}create_simulation_data(e,t){const n={stimulus:e.stimulus,slider_start:e.slider_start,response:this.jsPsych.randomization.randomInt(e.min,e.max),rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0)},i=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,i),i}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const i=this.create_simulation_data(e,t),s=this.jsPsych.getDisplayElement();if(this.trial(s,e),n(),null!==i.rt){const e=s.querySelector("input[type='range']");setTimeout((()=>{this.jsPsych.pluginAPI.clickTarget(e),e.valueAsNumber=i.response}),i.rt/2),this.jsPsych.pluginAPI.clickTarget(s.querySelector("button"),i.rt)}}};qe.info=Re;let $e=qe;const De={name:"survey-multi-choice",version:"2.1.0",parameters:{questions:{type:D.COMPLEX,array:!0,nested:{prompt:{type:D.HTML_STRING,default:void 0},options:{type:D.STRING,array:!0,default:void 0},required:{type:D.BOOL,default:!1},horizontal:{type:D.BOOL,default:!1},name:{type:D.STRING,default:""}}},randomize_question_order:{type:D.BOOL,default:!1},preamble:{type:D.HTML_STRING,default:null},button_label:{type:D.STRING,default:"Continue"},autocomplete:{type:D.BOOL,default:!1}},data:{response:{type:D.OBJECT},rt:{type:D.INT},question_order:{type:D.INT,array:!0}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}},ze="jspsych-survey-multi-choice",Be=class{constructor(e){this.jsPsych=e}trial(e,t){const n=`${ze}_form`;var i="";i+=`\n    <style id="${ze}-css">\n      .${ze}-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }\n      .${ze}-text span.required {color: darkred;}\n      .${ze}-horizontal .${ze}-text {  text-align: center;}\n      .${ze}-option { line-height: 2; }\n      .${ze}-horizontal .${ze}-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}\n      label.${ze}-text input[type='radio'] {margin-right: 1em;}\n      </style>`,null!==t.preamble&&(i+=`<div id="${ze}-preamble" class="${ze}-preamble">${t.preamble}</div>`),t.autocomplete?i+=`<form id="${n}">`:i+=`<form id="${n}" autocomplete="off">`;for(var s=[],r=0;r<t.questions.length;r++)s.push(r);t.randomize_question_order&&(s=this.jsPsych.randomization.shuffle(s));for(r=0;r<t.questions.length;r++){var a=t.questions[s[r]],o=s[r],l=[`${ze}-question`];a.horizontal&&l.push(`${ze}-horizontal`),i+=`<div id="${ze}-${o}" class="${l.join(" ")}" data-name="${a.name}">`,i+=`<p class="${ze}-text survey-multi-choice">${a.prompt}`,a.required&&(i+="<span class='required'>*</span>"),i+="</p>";for(var u=0;u<a.options.length;u++){var c=`${ze}-option-${o}-${u}`,d=`${ze}-response-${o}`,h=`${ze}-response-${o}-${u}`,p=a.required?"required":"";i+=`\n        <div id="${c}" class="${ze}-option">\n          <label class="${ze}-text" for="${h}">\n            <input type="radio" name="${d}" id="${h}" value="${a.options[u]}" ${p} />\n            ${a.options[u]}\n            </label>\n        </div>`}i+="</div>"}i+=`<input type="submit" id="${ze}-next" class="${ze} jspsych-btn"${t.button_label?' value="'+t.button_label+'"':""} />`,i+="</form>",e.innerHTML=i;e.querySelector(`#${n}`).addEventListener("submit",(n=>{n.preventDefault();for(var i=performance.now(),r=Math.round(i-m),a={},o=0;o<t.questions.length;o++){var l,u=e.querySelector(`#${ze}-${o}`),c="Q"+o;l=null!==u.querySelector("input[type=radio]:checked")?u.querySelector("input[type=radio]:checked").value:"";var d={},h=c;""!==u.attributes["data-name"].value&&(h=u.attributes["data-name"].value),d[h]=l,Object.assign(a,d)}var p={rt:r,response:a,question_order:s};this.jsPsych.finishTrial(p)}));var m=performance.now()}simulate(e,t,n,i){"data-only"==t&&(i(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,i)}create_simulation_data(e,t){const n={};let i=1e3;for(const a of e.questions){n[a.name?a.name:`Q${e.questions.indexOf(a)}`]=this.jsPsych.randomization.sampleWithoutReplacement(a.options,1)[0],i+=this.jsPsych.randomization.sampleExGaussian(1500,400,.005,!0)}const s={response:n,rt:i,question_order:e.randomize_question_order?this.jsPsych.randomization.shuffle([...Array(e.questions.length).keys()]):[...Array(e.questions.length).keys()]},r=this.jsPsych.pluginAPI.mergeSimulationData(s,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const i=this.create_simulation_data(e,t),s=this.jsPsych.getDisplayElement();this.trial(s,e),n();const r=Object.entries(i.response);for(let a=0;a<r.length;a++)this.jsPsych.pluginAPI.clickTarget(s.querySelector(`#${ze}-response-${a}-${e.questions[a].options.indexOf(r[a][1])}`),(i.rt-1e3)/r.length*(a+1));this.jsPsych.pluginAPI.clickTarget(s.querySelector(`#${ze}-next`),i.rt)}};Be.info=De;let Ve=Be;const Ge={name:"survey-text",version:"2.1.0",parameters:{questions:{type:D.COMPLEX,array:!0,default:void 0,nested:{prompt:{type:D.HTML_STRING,default:void 0},placeholder:{type:D.STRING,default:""},rows:{type:D.INT,default:1},columns:{type:D.INT,default:40},required:{type:D.BOOL,default:!1},name:{type:D.STRING,default:""}}},randomize_question_order:{type:D.BOOL,default:!1},preamble:{type:D.HTML_STRING,default:null},button_label:{type:D.STRING,default:"Continue"},autocomplete:{type:D.BOOL,default:!1}},data:{response:{type:D.OBJECT},rt:{type:D.INT},question_order:{type:D.INT,array:!0}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, \tauthor = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, \tjournal = {Journal of Open Source Software}, \tdoi = {10.21105/joss.05351}, \tissn = {2475-9066}, \tnumber = {85}, \tyear = {2023}, \tmonth = {may 11}, \tpages = {5351}, \tpublisher = {Open Journals}, \ttitle = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, \turl = {https://joss.theoj.org/papers/10.21105/joss.05351}, \tvolume = {8}, }  '}},Fe=class{constructor(e){this.jsPsych=e}trial(e,t){for(var n=0;n<t.questions.length;n++)void 0===t.questions[n].rows&&(t.questions[n].rows=1);for(n=0;n<t.questions.length;n++)void 0===t.questions[n].columns&&(t.questions[n].columns=40);for(n=0;n<t.questions.length;n++)void 0===t.questions[n].value&&(t.questions[n].value="");var i="";null!==t.preamble&&(i+='<div id="jspsych-survey-text-preamble" class="jspsych-survey-text-preamble">'+t.preamble+"</div>"),t.autocomplete?i+='<form id="jspsych-survey-text-form">':i+='<form id="jspsych-survey-text-form" autocomplete="off">';var s=[];for(n=0;n<t.questions.length;n++)s.push(n);t.randomize_question_order&&(s=this.jsPsych.randomization.shuffle(s));for(n=0;n<t.questions.length;n++){var r=t.questions[s[n]],a=s[n];i+='<div id="jspsych-survey-text-'+a+'" class="jspsych-survey-text-question" style="margin: 2em 0em;">',i+='<p class="jspsych-survey-text">'+r.prompt+"</p>";var o=0==n?"autofocus":"",l=r.required?"required":"";1==r.rows?i+='<input type="text" id="input-'+a+'"  name="#jspsych-survey-text-response-'+a+'" data-name="'+r.name+'" size="'+r.columns+'" '+o+" "+l+' placeholder="'+r.placeholder+'"></input>':i+='<textarea id="input-'+a+'" name="#jspsych-survey-text-response-'+a+'" data-name="'+r.name+'" cols="'+r.columns+'" rows="'+r.rows+'" '+o+" "+l+' placeholder="'+r.placeholder+'"></textarea>',i+="</div>"}i+='<input type="submit" id="jspsych-survey-text-next" class="jspsych-btn jspsych-survey-text" value="'+t.button_label+'"></input>',i+="</form>",e.innerHTML=i,e.querySelector("#input-"+s[0]).focus(),e.querySelector("#jspsych-survey-text-form").addEventListener("submit",(e=>{e.preventDefault();for(var n=performance.now(),i=Math.round(n-u),s={},r=0;r<t.questions.length;r++){var a="Q"+r,o=document.querySelector("#jspsych-survey-text-"+r).querySelector("textarea, input"),l=o.value,c=o.attributes["data-name"].value;""==c&&(c=a);var d={};d[c]=l,Object.assign(s,d)}var h={rt:i,response:s};this.jsPsych.finishTrial(h)}));var u=performance.now()}simulate(e,t,n,i){"data-only"==t&&(i(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,i)}create_simulation_data(e,t){const n={};let i=1e3;for(const a of e.questions){const t=a.name?a.name:`Q${e.questions.indexOf(a)}`,s=1==a.rows?this.jsPsych.randomization.sampleExponential(.25):this.jsPsych.randomization.randomInt(1,10)*a.rows;n[t]=this.jsPsych.randomization.randomWords({exactly:s,join:" "}),i+=this.jsPsych.randomization.sampleExGaussian(2e3,400,.004,!0)}const s={response:n,rt:i},r=this.jsPsych.pluginAPI.mergeSimulationData(s,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const i=this.create_simulation_data(e,t),s=this.jsPsych.getDisplayElement();this.trial(s,e),n();const r=Object.entries(i.response).map((e=>e[1]));for(let a=0;a<r.length;a++)this.jsPsych.pluginAPI.fillTextInput(s.querySelector(`#input-${a}`),r[a],(i.rt-1e3)/r.length*(a+1));this.jsPsych.pluginAPI.clickTarget(s.querySelector("#jspsych-survey-text-next"),i.rt)}};Fe.info=Ge;let Ke=Fe;const Je=_e.stimulus_directions.slice(),Ue=function(){const e=new Date,t=e=>e.toString().padStart(2,"0"),n=e.getFullYear(),i=t(e.getMonth()+1),s=t(e.getDate()),r=t(e.getHours()),a=t(e.getMinutes()),o=t(e.getSeconds()),l=e.getTimezoneOffset();return`${n}-${i}-${s}_${r}-${a}-${o}_${`${l<=0?"p":"m"}${t(Math.floor(Math.abs(l)/60))}${t(Math.abs(l)%60)}`}`}();let He=!1,Ye=null;const We=function(e){const t=new he(e);return Object.defineProperties(t,Object.fromEntries(Object.entries({init:"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.",ALL_KEYS:'jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.',NO_KEYS:'jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.',currentTimelineNodeID:"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.",progress:"`progress()` was renamed to `getProgress()` in jsPsych v7.",startTime:"`startTime()` was renamed to `getStartTime()` in jsPsych v7.",totalTime:"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.",currentTrial:"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.",initSettings:"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.",allTimelineVariables:"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7."}).map((([e,t])=>[e,{get(){throw new pe(t)}}])))),t}({on_finish:function(){We.data.displayData()}}),Xe={type:Ke,data:{trial_name:"trial_participant_info",timestamp:`${(new Date).toISOString()}`,exp_config:_e},questions:[{name:"participant_id",prompt:"participant_id",placeholder:"",required:!0}],on_load:function(){Ye=We.data.getURLVariable("participant_id"),Ye&&We.finishTrial({})},on_finish:function(e){Ye||(Ye=e.response.participant_id),We.data.addProperties({participant_id:Ye})}},Qe={type:Te,stimulus:"\n        <div class=\"instruction_container\">\n        <p>Thank you for participating in this experiment. This study aims to examine how your visual system adapts to motion. The experiment is simple, and there are no right or wrong answerssimply report what you see.</p>\n\n        <p> Push the 'SPACE' bar to continue. </p>\n        </div>\n    ",choices:[" "],data:{trial_name:"trial_welcome"}},Ze={type:Te,stimulus:'\n        <div class="instruction_container">\n        <p>The experiment is now complete. Thank you very much for your participation.</p>\n\n        <p> Feel free to leave everything as it is. The experimenter will take over from here. </p>\n\n        <p style="color: #808080;font-size:12px;">Press \'SPACE\' bar to continue.</p>\n        </div>\n    ',choices:[" "],data:{trial_name:"trial_welcome"}},et={type:Te,stimulus:`\n        <div class="instruction_container">\n        <p>You will see a moving pattern. Please keep your eyes focused on the dot in the centre of the screen. Do not move your eyes around or look away from the screen.</p>\n        <p>The moving pattern will appear for <strong>${(_e.adapt_duration_ms/1e3).toFixed(0)} seconds</strong>, remain <strong>focused</strong> on the <strong>dot in the centre of the screen</strong>.</p>\n        <p>Once the fixation dot turns green, the motion will stop. Remain fixated on the dot, do not move your eyes. Movement may begin again, but not in the same way. Please indicate when this movement stops by pushing the 'SPACE' bar.</p>\n\n        <p> Push the 'SPACE' bar to begin. </p>\n        </div>\n    `,choices:[" "],data:{trial_name:"trail_instruction"},on_start:function(e){},on_load:function(){},on_finish:function(e){}},tt={type:Te,stimulus:"\n    <div class=\"instruction_container\">\n    <p>Please let the researcher know if you would like a few more practice trials.</p>\n    <p style=\"color: #808080;font-size:12px;line-height:0;\">Press 'ENTER' key to redo.</p>\n    <p> Push the 'SPACE' bar to continue. </p>\n    </div>\n    ",data:{trial_name:"trial_redo_last_trial"},choices:["Enter"," "],on_load:function(){tt.var.redo=!1},on_finish:function(e){We.pluginAPI.compareKeys(e.response,"Enter")&&(tt.var.redo=!0)},var:{redo:!1}};const nt={timeline:[{type:Oe,data:{trial_name:"trial_skip_calibration"},stimulus:`\n        <div class="instruction_container">\n        <p>Do you want to do the calibration?</p>\n        <p></p>\n        <p>${function(){const e=localStorage.getItem("virtual_chinrest_result");if(e){const t=JSON.parse(e);return`If skipped, following calibration will be used: \n        view distance: ${(t.view_dist_mm/10).toFixed(2)}cm, and\n        scale factor: ${t.scale_factor.toFixed(2)}\n        `}return"If skipped, NO calibration will be used"}()}</p>\n        </div>\n    `,choices:["calibration","skip"]},{timeline:[{type:ke,data:{trial_name:"trial_virtual_chinrest"},blindspot_reps:3,resize_units:_e.resize_units,pixels_per_unit:_e.pixels_per_unit,on_finish:function(e){localStorage.setItem("virtual_chinrest_result",JSON.stringify(e))}}],conditional_function:function(){if(0===We.data.get().last(1).values()[0].response)return!0;{const e=localStorage.getItem("virtual_chinrest_result");if(e){document.getElementById("jspsych-content").style.transform=`scale(${JSON.parse(e).scale_factor})`}return!1}}}]},it={type:Ne,data:{trial_name:"trial_enter_fullscreen"},fullscreen_mode:!0},st={type:Ne,data:{trial_name:"trial_exit_fullscreen"},fullscreen_mode:!1,delay_after:0};function rt(){const{canvas:e}=function(e){const t=document.createElement("canvas");t.width=3*e,t.height=e;const n=t.getContext("2d");let i=be(n,e,e);return n.putImageData(i,0,0),n.putImageData(i,2*e,0),i=be(n,e,e),n.putImageData(i,e,0),{canvas:t,ctx:n}}(_e.noise_canvas_diameter_pix);return e.style.width=3*_e.noise_diameter_pix+"px",e.style.height=`${_e.noise_diameter_pix}px`,e.style.imageRendering="pixelated",e.style.position="absolute",e.style.left="0px",e.style.animation=`moveRight ${_e.noise_canvas_one_run_duration}s linear infinite`,e}function at(e){We.pluginAPI.getKeyboardResponse({valid_responses:e,rt_method:"performance",persist:!1,allow_held_key:!1,callback_function:e=>{We.finishTrial({rt:e.rt,response:e.key})}})}function ot(){_e.allow_early_abort&&We.pluginAPI.getKeyboardResponse({valid_responses:_e.early_abort_keys,rt_method:"performance",persist:!0,allow_held_key:!1,callback_function:e=>{He=!0,We.abortCurrentTimeline(),We.finishTrial({})}})}const lt={type:Te,data:{trial_name:"trial_random_noise_static"},choices:["NO_KEYS"],stimulus:`<div id="random_noise" \n    style="\n    width: ${_e.noise_diameter_pix}px; \n    height: ${_e.noise_diameter_pix}px; \n    position: relative;\n    // border: 1px solid black;\n    "></div>`,on_start:function(e){lt.vars.direction=Je.pop();const t=rt();lt.vars.stimulus=t;const n=we(_e.fixation_diameter_pix,4,"#808080");lt.vars.fixation=n},on_load:function(){const e=document.getElementById("random_noise");e.style.rotate=`${lt.vars.direction}deg`,e.style.overflow="hidden",We.pluginAPI.setTimeout((()=>{if(lt.vars.stimulus.style.animationPlayState="paused",at([" "]),_e.enable_adapt_finish_prompt){const t=we(_e.fixation_diameter_pix,4,"lightgreen");e.appendChild(t)}}),_e.adapt_duration_ms),e.appendChild(lt.vars.stimulus),e.appendChild(lt.vars.fixation)},on_finish:function(e){e.direction=lt.vars.direction,lt.vars.stimulus={}},vars:{}},ut={type:Te,data:{trial_name:"trial_random_noise_dynamic"},choices:["NO_KEYS"],stimulus:`<div id="random_noise" \n    style="\n    width: ${_e.noise_diameter_pix}px; \n    height: ${_e.noise_diameter_pix}px; \n    position: relative;\n    // border: 1px solid black;\n    "></div>`,on_start:function(e){ut.vars.direction=Je.pop();const t=rt();t.id="stimulus_canvas",ut.vars.stimulus=t;const n=we(_e.fixation_diameter_pix,4,"#808080");ut.vars.fixation=n;const{canvas:i,redraw:s}=function(e){const t=document.createElement("canvas");t.width=e,t.height=e;const n=t.getContext("2d");let i=n.createImageData(e,e),s=n.createImageData(e,e);return ve(i),ve(s),n.putImageData(i,0,0),[i,s]=[s,i],{canvas:t,ctx:n,redraw:function(){n.putImageData(i,0,0),ve(s),[i,s]=[s,i]}}}(_e.noise_canvas_diameter_pix);i.style.width=`${_e.noise_diameter_pix}px`,i.style.height=`${_e.noise_diameter_pix}px`,i.style.imageRendering="pixelated",i.style.position="absolute",i.style.left="0px",ut.vars.test_stimulus=i,ut.vars.redraw_func=s},on_load:function(){const e=document.getElementById("random_noise");e.style.rotate=`${ut.vars.direction}deg`,e.style.overflow="hidden",We.pluginAPI.setTimeout((()=>{document.getElementById("stimulus_canvas").remove(),e.insertBefore(ut.vars.test_stimulus,e.firstChild);let t=performance.now(),n=0;const i=e=>{const s=Math.floor((e-t)/_e.noise_dynamic_frame_duration);s>n&&(n=s,ut.vars.redraw_func()),ut.vars.animation_id=requestAnimationFrame(i)};if(requestAnimationFrame(i),_e.enable_adapt_finish_prompt){const t=we(_e.fixation_diameter_pix,4,"lightgreen");e.appendChild(t)}We.pluginAPI.getKeyboardResponse({valid_responses:[" "],rt_method:"performance",persist:!1,allow_held_key:!1,callback_function:e=>{cancelAnimationFrame(ut.vars.animation_id),We.finishTrial({rt:e.rt,response:e.key})}})}),_e.adapt_duration_ms),e.appendChild(ut.vars.stimulus),e.appendChild(ut.vars.fixation)},on_finish:function(e){e.direction=ut.vars.direction,ut.vars.stimulus={}},vars:{}},ct={type:Te,data:{trial_name:"trial_rest"},stimulus:`\n        <div class="instruction_container" id="instruction_container">\n        <p>Please rest for the next <span id="rest_timer">${_e.rest_min_duration_ms/1e3}</span> seconds.</p>\n        <p>You will be informed when the next trial is ready.</p>\n        </div>\n    `,choices:["NO_KEYS"],on_load:function(){const e=document.getElementById("rest_timer");let t=_e.rest_min_duration_ms/1e3;const n=setInterval((()=>{if(t-=1,e.innerText=t,t<=0){clearInterval(n);document.getElementById("instruction_container").innerHTML="\n                <p>Press 'SPACE' bar to continue.</p>\n                ",at([" "])}}),1e3)}},dt={type:Te,data:{trial_name:"sine_grating_static"},choices:["NO_KEYS"],stimulus:`<div id="sine_grating" \n    style="\n    width: ${_e.sine_grating_diameter_pix}px; \n    height: ${_e.sine_grating_diameter_pix}px; \n    position: relative;\n    // border: 1px solid black;\n    "></div>`,on_start:function(e){dt.vars.direction=Je.pop();const{canvas:t,animate:n}=je(_e.sine_grating_pix_per_cycle,_e.sine_grating_pix_per_sec,_e.sine_grating_diameter_pix,_e.sine_grating_diameter_pix);dt.vars.stimulus=t,dt.vars.animate=n;const i=we(_e.fixation_diameter_pix,4,"#808080");dt.vars.fixation=i},on_load:function(){const e=document.getElementById("sine_grating");e.style.rotate=`${dt.vars.direction}deg`,e.style.overflow="hidden",We.pluginAPI.setTimeout((()=>{if(dt.vars.animate.pause(),_e.enable_adapt_finish_prompt){const t=we(_e.fixation_diameter_pix,4,"lightgreen");e.appendChild(t)}at([" "])}),_e.adapt_duration_ms),e.appendChild(dt.vars.stimulus),e.appendChild(dt.vars.fixation)},on_finish:function(e){e.direction=dt.vars.direction,dt.vars.stimulus={}},vars:{}},ht={type:Te,data:{trial_name:"sine_grating_dynamic"},choices:["NO_KEYS"],stimulus:`\n    <div id="sine_grating" \n    style="\n    width: ${_e.sine_grating_diameter_pix}px; \n    height: ${_e.sine_grating_diameter_pix}px; \n    position: relative;\n    // border: 1px solid black;\n    ">\n        <div id="stim_same"\n        style="\n        width: ${_e.sine_grating_diameter_pix}px; \n        height: ${_e.sine_grating_diameter_pix}px;\n        position: absolute;\n        // border: 1px solid black;\n        ">\n        </div>\n        <div id="stim_oppo"\n        style="\n        width: ${_e.sine_grating_diameter_pix}px; \n        height: ${_e.sine_grating_diameter_pix}px;\n        position: absolute;\n        // border: 1px solid black;\n        ">\n        </div>\n    </div>`,on_start:function(e){ht.vars.direction=Je.pop();const{canvas:t,animate:n}=je(_e.sine_grating_pix_per_cycle,_e.sine_grating_pix_per_sec,_e.sine_grating_diameter_pix,_e.sine_grating_diameter_pix);ht.vars.stimulus=t,ht.vars.animate=n;const{canvas:i,animate:s}=je(_e.sine_grating_pix_per_cycle,_e.sine_test_speed_pix_per_sec,_e.sine_grating_diameter_pix,_e.sine_grating_diameter_pix);ht.vars.test_stimulus_oppo=i,ht.vars.test_stimulus_oppo_animate=s;const{canvas:r,animate:a}=je(_e.sine_grating_pix_per_cycle,_e.sine_test_speed_pix_per_sec,_e.sine_grating_diameter_pix,_e.sine_grating_diameter_pix);ht.vars.test_stimulus_same=r,ht.vars.test_stimulus_same_animate=a;const o=we(_e.fixation_diameter_pix,4,"#808080");ht.vars.fixation=o},on_load:function(){const e=document.getElementById("sine_grating");e.style.rotate=`${ht.vars.direction}deg`,e.style.overflow="hidden",We.pluginAPI.setTimeout((()=>{if(at([" "]),_e.enable_adapt_finish_prompt){const t=we(_e.fixation_diameter_pix,4,"lightgreen");e.appendChild(t)}e.removeChild(ht.vars.stimulus);const t=document.getElementById("stim_oppo");t.appendChild(ht.vars.test_stimulus_oppo),t.style.rotate="180deg";document.getElementById("stim_same").appendChild(ht.vars.test_stimulus_same),ht.vars.test_stimulus_oppo.style.opacity="0.5"}),_e.adapt_duration_ms),e.appendChild(ht.vars.stimulus),e.appendChild(ht.vars.fixation)},on_finish:function(e){e.direction=ht.vars.direction,ht.vars.stimulus={}},vars:{}};function pt(){We.data.get().localSave("json",`${Ue}_id-${Ye}.json`)}const mt={type:Te,stimulus:'\n            <div class="instruction_container">\n            <p>Press the button to save the data.</p>\n            </div>\n            <button id="save_data">Save Data</button>\n        ',data:{trial_name:"trial_save_data"},on_start:function(e){pt()},on_load:function(){document.getElementById("save_data").addEventListener("click",(()=>{pt()}))},choices:["NO_KEYS"]},ft={type:Ke,data:{trial_name:"trial_survey_motion"},questions:[{name:"experimenter_finish_comment",prompt:"Finish comment for experimenter",placeholder:"You can leave it blank",required:!1,rows:5}],on_finish:function(e){const t=We.data.getInteractionData();e.interaction_data=t}},gt={timeline:[{type:Ke,data:{trial_name:"trial_early_abort_survey"},questions:[{prompt:"Please provide reason for early abort",name:"reason",required:!0,rows:5}]},ft,mt],conditional_function:function(){return He}},yt={type:$e,data:{trial_name:"trial_survey_confidence"},stimulus:'\n        <div class="instruction_container">\n        <p>How confident are with your previous response?</p>\n        </div>\n    ',require_movement:!0,labels:["Not confident","Unsure","Very confident"],on_load:function(){ot()}},_t={timeline:[{type:Ve,questions:[{prompt:`After ${_e.enable_adapt_finish_prompt?"the fixation dot turned green":"watching the patterns"}, I saw movement that appeared to move:`,name:"direction",options:["left","right","up","down","no movement"],required:!0,horizontal:!1}],data:{trial_name:"trial_survey_motion"},on_load:function(){document.getElementById("jspsych-survey-multi-choice_form").classList.add("instruction_container"),ot()}},yt]},vt=[lt,dt,ut,ht],bt={timeline:[],on_timeline_finish:function(){We.data.get().addToAll({training_trial:!0}),Je.splice(0,Je.length,..._e.stimulus_directions.slice())}};for(let jt=0;jt<vt.length;jt++)bt.timeline.push({timeline:[et,vt[jt],tt,ct],loop_function:function(e){return tt.var.redo}});const wt={timeline:[]};for(let jt=0;jt<_e.n_condition_repeat;jt++){const e=[];for(let t=0;t<vt.length;t++)e.push({timeline:[et,vt[t],_t,gt,ct]});me(e),wt.timeline.push(...e)}const xt=[it,nt,Xe,Qe,bt,wt,Ze,st,ft,mt];We.run(xt);
